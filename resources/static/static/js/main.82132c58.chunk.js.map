{"version":3,"sources":["conf/env.js","api/AxiosConf.js","api/Api.js","camera/Play.js","camera/CameraEdit.js","camera/ActionList.js","camera/CameraList.js","camerashare/CopyAlert.js","camerashare/CameraShareEdit.js","camerashare/ActionList.js","camerashare/CameraShareList.js","login/SignInSide.js","404/NoMatch.js","camera/Live.js","route/Routing.js","Rtsp2rtmp.js","index.js"],"names":["serverURL","window","location","origin","axios","defaults","withCredentials","timeout","interceptors","request","use","config","token","localStorage","getItem","headers","err","console","error","Promise","reject","response","data","errcode","parseInt","hash","isCancel","log","status","setItem","alert","String","toLowerCase","substring","Env","POST","url","params","post","then","res","GET","get","API","id","useStyles","makeStyles","theme","appBar","position","backgroundColor","title","marginLeft","spacing","flex","videoContainer","width","margin","Transition","React","forwardRef","props","ref","Slide","direction","Play","classes","useState","open","setOpen","audio","setAudio","playParam","playMethod","cameraCode","authCode","player","lastDecodedFrame","useImperativeHandle","onRef","handleClickOpen","handleClose","flv_load","val","mediaDataSource","type","videoUrl","flv_load_mds","element","document","getElementsByClassName","pause","unload","detachMediaElement","destroy","Flv","createPlayer","enableWorker","lazyLoadMaxDuration","seekType","on","Events","ERROR","errorType","errorDetail","errorInfo","setTimeout","STATISTICS_INFO","decodedFrames","attachMediaElement","load","play","Dialog","fullScreen","onClose","TransitionComponent","AppBar","className","Toolbar","Button","variant","onClick","Typography","Switch","checked","color","name","onChange","event","target","inputProps","autoFocus","controls","allow","formClass","formDiv","CameraEdit","row","enabled","setEnabled","saveVideo","setSaveVideo","live","setLive","code","rtspURL","rtmpURL","playAuthCode","onlineStatus","alertShow","setAlertShow","alertText","setAlertText","save","callBack","msg","formChange","value","switchChange","Alert","severity","AlertTitle","noValidate","autoComplete","onSubmit","TextField","label","InputProps","readOnly","defaultValue","root","dropdown","top","right","left","zIndex","border","padding","ActionList","playRef","createRef","editRef","ClickAwayListener","onClickAway","prev","List","component","aria-label","ListItem","button","ListItemText","primary","current","exact","to","pathname","search","state","columns","minWidth","format","container","minHeight","CameraList","rows","setRows","page","setPage","rowsPerPage","setRowsPerPage","getPageList","splice","push","useEffect","Paper","TableContainer","Table","stickyHeader","TableHead","TableRow","map","column","TableCell","align","style","TableBody","slice","hover","role","tabIndex","TablePagination","rowsPerPageOptions","count","length","onChangePage","newPage","onChangeRowsPerPage","CopyAlert","dialog","content","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","CameraShareEdit","cameraId","startTime","Moment","deadline","add","setRow","formDateTimeChange","InputLabelProps","shrink","dialogObj","copyRef","sURL","Copy","Date","getTimezoneOffset","camera","CameraShareList","editRow","setEditRow","setCamera","reg","RegExp","r","substr","match","decodeURIComponent","getQueryString","editRowNew","Copyright","href","getFullYear","height","image","backgroundImage","backgroundRepeat","palette","grey","backgroundSize","backgroundPosition","paper","display","flexDirection","alignItems","avatar","secondary","main","form","marginTop","submit","SignInSide","userName","password","user","Grid","CssBaseline","item","xs","sm","md","elevation","square","Avatar","required","fullWidth","FormControlLabel","control","Checkbox","Box","mt","Component","method","Routing","path","Live","NoMatch","memo","Rtsp2rtmp","App","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.82132c58.chunk.js","sourcesContent":["let env = process.env.NODE_ENV\r\nlet serverURL\r\n \r\nif (env === 'development') {\r\n    serverURL = \"http://127.0.0.1:8080\"\r\n} else if (env === 'production') {\r\n    serverURL = window.location.origin\r\n}\r\n\r\nexport default {serverURL:serverURL}","import Env from '../conf/env';\r\nimport axios from 'axios'\r\n\r\n\r\naxios.defaults.withCredentials = false;\r\n\r\naxios.defaults.timeout = 10000;\r\n\r\naxios.interceptors.request.use(config => {\r\n  let token = window.localStorage.getItem(\"token\")\r\n  config.headers.token = token\r\n  return config;\r\n}, err => {\r\n  console.error(err);\r\n  return Promise.reject(err);\r\n});\r\n\r\naxios.interceptors.response.use(function (response) {\r\n  if (response.data && response.data.errcode) {\r\n    if (parseInt(response.data.errcode) === 401) {\r\n      //nologin\r\n      window.location.hash = \"#/login\"\r\n    }\r\n  }\r\n  return response;\r\n}, function (error) {\r\n  if (axios.isCancel()) {\r\n    return Promise.reject(error);\r\n  } else {\r\n    if (error.response) {\r\n      console.log(error.response.status === 401)\r\n      if (error.response.status === 401) {\r\n        if (!window.localStorage.getItem(\"token\") || !window.localStorage.getItem(\"tokenExpired\") || window.localStorage.getItem(\"tokenExpired\") === \"false\") { \r\n          window.localStorage.setItem(\"tokenExpired\", \"true\");\r\n          window.location.hash = \"#/login\"\r\n        }\r\n      } else if (error.response.status === 500) {\r\n        alert(\"server exception !\")\r\n      }\r\n    } else if (error && String(error).toLowerCase().substring(0, 14) === \"error: timeout\") {\r\n      alert(\"server timeout !\")\r\n    }else{\r\n      alert(\"server error !\")\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n});\r\n\r\nlet serverURL = Env.serverURL;\r\n\r\nexport const POST = (url, params) => {\r\n  return axios.post(`${serverURL}${url}`, params).then(res => res.data)\r\n}\r\nexport const GET = (url, params) => {\r\n  return axios.get(`${serverURL}${url}`, {\r\n    params: params\r\n  }).then(res => res.data)\r\n}\r\n\r\nexport const PUT = (url, params) => {\r\n  return axios.put(`${serverURL}${url}`, params).then(res => res.data)\r\n}\r\n\r\nexport const DELETE = (url, params) => {\r\n  return axios.delete(`${serverURL}${url}`, {\r\n    params: params\r\n  }).then(res => res.data)\r\n}\r\n\r\nexport const PATCH = (url, params) => {\r\n  return axios.patch(`${serverURL}${url}`, params).then(res => res.data)\r\n}\r\n"," import Env from '../conf/env';\r\n import * as API from './AxiosConf'\r\n \r\n let serverURL = Env.serverURL;\r\n export default {\r\n    flvURL: `${serverURL}`,\r\n    login: (params) => {\r\n        return API.POST(`/system/login`,params)\r\n    },\r\n    cameraList: (params) => {\r\n        return API.GET(`/camera/list`,params)\r\n    },\r\n    cameraDetail: (params) => {\r\n        return API.GET(`/camera/detail`,params)\r\n    },\r\n    cameraEdit: (params) => {\r\n        return API.POST(`/camera/edit`,params)\r\n    },\r\n    cameraDelete: (params) => {\r\n        return API.POST(`/camera/delete/${params.id}`,params)\r\n    },\r\n    cameraEnabled: (params) => {\r\n        return API.POST(`/camera/enabled`,params)\r\n    },\r\n    cameraSaveVideoChange: (params) => {\r\n        return API.POST(`/camera/savevideochange`,params)\r\n    },\r\n    cameraLiveChange: (params) => {\r\n        return API.POST(`/camera/livechange`,params)\r\n    },\r\n    cameraPlayAuthcodeReset: (params) => {\r\n        return API.POST(`/camera/playauthcodereset`,params)\r\n    },\r\n    cameraShareList: (params) => {\r\n        return API.GET(`/camerashare/list`,params)\r\n    },\r\n    cameraShareEdit: (params) => {\r\n        return API.POST(`/camerashare/edit`,params)\r\n    },\r\n    cameraShareDelete: (params) => {\r\n        return API.POST(`/camerashare/delete/${params.id}`,params)\r\n    },\r\n    cameraShareEnabled: (params) => {\r\n        return API.POST(`/camerashare/enabled`,params)\r\n    },\r\n }\r\n ","import React, { useImperativeHandle } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Flv from 'flv.js';\r\nimport API from '../api/Api';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: 'relative',\r\n    backgroundColor: '#eebbaa',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  videoContainer: {\r\n    width: '90%',\r\n    margin: '0 auto'\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Play(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [audio, setAudio] = React.useState(true);\r\n  const [playParam, setPlayParam] = React.useState(props.playParam || {\r\n    playMethod: \"\",\r\n    cameraCode: \"\",\r\n    authCode: \"\"\r\n  });\r\n  var player = null;\r\n  var lastDecodedFrame = 0\r\n\r\n  const switchChange = (event) => {\r\n    setAudio(event.target.checked)\r\n  }\r\n\r\n  //用useImperativeHandle暴露一些外部ref能访问的属性\r\n  useImperativeHandle(props.onRef, () => {\r\n    return {\r\n      handleClickOpen: handleClickOpen,\r\n    };\r\n  });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const flv_load = (val) => {\r\n      var mediaDataSource = {\r\n          type: 'flv'\r\n      };\r\n      let videoUrl = API.flvURL+\"/live/\"+playParam.playMethod+\"/\"+playParam.cameraCode+\"/\"+playParam.authCode+\".flv\";\r\n      mediaDataSource['url'] = videoUrl;\r\n      mediaDataSource['hasAudio'] = audio;\r\n      mediaDataSource['isLive'] = true;\r\n      console.log('MediaDataSource', mediaDataSource);\r\n      flv_load_mds(mediaDataSource);\r\n  }\r\n\r\n  const flv_load_mds = (mediaDataSource) => {\r\n      var element = document.getElementsByClassName('centeredVideo')[0];\r\n    \r\n      if (typeof player !== \"undefined\") {\r\n          if (player != null) {\r\n            player.pause();\r\n            player.unload();\r\n            player.detachMediaElement();\r\n            player.destroy();\r\n            player= null;\r\n          }\r\n      }\r\n      \r\n      player = Flv.createPlayer(mediaDataSource, {\r\n          enableWorker: false,\r\n          lazyLoadMaxDuration: 3 * 60,\r\n          seekType: 'range',\r\n      });\r\n      player.on(Flv.Events.ERROR, (errorType, errorDetail, errorInfo) => {\r\n        console.log(\"errorType:\", errorType);\r\n        console.log(\"errorDetail:\", errorDetail);\r\n        console.log(\"errorInfo:\", errorInfo);\r\n        //视频出错后销毁重新创建\r\n        if (player) {\r\n          player.pause();\r\n          player.unload();\r\n          player.detachMediaElement();\r\n          player.destroy();\r\n          player= null;\r\n          window.setTimeout(flv_load,500)\r\n        }\r\n      });\r\n      //画面卡死\r\n      player.on(Flv.Events.STATISTICS_INFO, function (res) {\r\n        if (lastDecodedFrame == 0) {\r\n          lastDecodedFrame = res.decodedFrames;\r\n          return;\r\n        }\r\n        if (lastDecodedFrame != res.decodedFrames) {\r\n          lastDecodedFrame = res.decodedFrames;\r\n        } else {\r\n            console.log(\"decodedFrames:\", res.decodedFrames)\r\n            lastDecodedFrame = 0;\r\n            if (player) {\r\n              player.pause();\r\n              player.unload();\r\n              player.detachMediaElement();\r\n              player.destroy();\r\n              player= null;\r\n              window.setTimeout(flv_load,500)\r\n          }\r\n        }\r\n      });\r\n      player.attachMediaElement(element);\r\n      player.load();\r\n      player.play()\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Button variant=\"contained\" onClick={flv_load}>\r\n              play\r\n            </Button>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n            hasAudio\r\n              <Switch\r\n                checked={audio}\r\n                id=\"Audio\"\r\n                color=\"primary\"\r\n                name=\"hasAudio\"\r\n                onChange={switchChange}\r\n                inputProps={{ 'aria-label': 'primary checkbox' }}\r\n              />\r\n            </Typography>\r\n            <Button autoFocus color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon />\r\n            </Button>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <div className={classes.videoContainer}>\r\n            <div>\r\n                <video name=\"videoElement\" className=\"centeredVideo\" controls allow=\"autoPlay\" width=\"100%\" >\r\n                    Your browser is too old which doesn't support HTML5 video.\r\n                </video>\r\n            </div>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useImperativeHandle } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Alert, AlertTitle } from '@material-ui/lab';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport API from '../api/Api'; \r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  formClass: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n      width: '25ch',\r\n    },\r\n  },\r\n  formDiv: {\r\n    margin: '0 auto',\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CameraEdit(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [enabled, setEnabled] = React.useState(props.row.enabled === 1?true:false);\r\n  const [saveVideo, setSaveVideo] = React.useState(props.row.saveVideo === 1?true:false);\r\n  const [live, setLive] = React.useState(props.row.live === 1?true:false);\r\n  const [row, setRow] = React.useState({\r\n    id: props.row.id,\r\n    code: props.row.code,\r\n    rtspURL: props.row.rtspURL,\r\n    rtmpURL: props.row.rtmpURL,\r\n    playAuthCode: props.row.playAuthCode,\r\n    onlineStatus: props.row.onlineStatus,\r\n    enabled: props.row.enabled,\r\n    saveVideo: props.row.saveVideo,\r\n    live: props.row.live,\r\n  });\r\n  const [alertShow, setAlertShow] = React.useState(false);\r\n  const [alertText, setAlertText] = React.useState(\"\");\r\n\r\n  //用useImperativeHandle暴露一些外部ref能访问的属性\r\n  useImperativeHandle(props.onRef, () => {\r\n    return {\r\n      handleClickOpen: handleClickOpen,\r\n    };\r\n  });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const save = (data) => {\r\n    API.cameraEdit(row)\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n      setAlertText(res.msg);\r\n      setAlertShow(true);\r\n      window.setTimeout(function (){\r\n        setAlertShow(false);\r\n      },5000)\r\n    });\r\n  };\r\n\r\n  const deleteCamera = (data) => {\r\n    API.cameraDelete(row)\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n      setAlertText(res.msg);\r\n      setAlertShow(true);\r\n      window.setTimeout(function (){\r\n        setAlertShow(false);\r\n      },5000)\r\n    });\r\n  };\r\n\r\n  const formChange = (event) => {\r\n    row[event.target.id] = event.target.value\r\n  }\r\n\r\n  const switchChange = (event) => {\r\n    console.log(event.target.checked)\r\n    row[event.target.id] = event.target.checked?1:0\r\n    if(event.target.id===\"enabled\"){\r\n      setEnabled(event.target.checked)\r\n    }\r\n    if(event.target.id===\"saveVideo\"){\r\n      setSaveVideo(event.target.checked)\r\n    }\r\n    if(event.target.id===\"live\"){\r\n      setLive(event.target.checked)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Button variant=\"contained\" onClick={save}>\r\n              保存\r\n            </Button>\r\n            <span>&nbsp;&nbsp;</span>\r\n            {props.type === 'edit'?\r\n              <Button variant=\"contained\" onClick={deleteCamera}>\r\n                删除\r\n              </Button>:\"\"\r\n            }       \r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              \r\n            </Typography>\r\n            <Button autoFocus color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon />\r\n            </Button>\r\n          </Toolbar>\r\n        </AppBar>{\r\n          alertShow?\r\n          <Alert severity=\"error\">\r\n            <AlertTitle>Error</AlertTitle>\r\n            {alertText} <strong>check it out!</strong>\r\n          </Alert>:\"\"\r\n        }\r\n        \r\n        <div className={classes.formDiv}>\r\n          <form className={classes.formClass} noValidate autoComplete=\"off\" onSubmit={save}>\r\n            {props.type === 'edit'?\r\n            <div>\r\n            <TextField \r\n              id=\"id\"\r\n              label=\"id\" \r\n              InputProps={{\r\n                readOnly: true,\r\n              }} \r\n              defaultValue={row.id}\r\n            />\r\n            </div>:\"\"}\r\n            <div>\r\n              <TextField \r\n                id=\"code\" \r\n                label=\"摄像头编号\" \r\n                defaultValue={row.code}\r\n                onChange={formChange}\r\n              />\r\n            </div>\r\n            <div>\r\n              <TextField \r\n                id=\"rtspURL\" \r\n                label=\"rtspURL\" \r\n                defaultValue={row.rtspURL}\r\n                onChange={formChange}\r\n              />\r\n            </div>\r\n            <div>\r\n              <TextField \r\n                id=\"rtmpURL\" \r\n                label=\"rtmpURL\" \r\n                defaultValue={row.rtmpURL}\r\n                onChange={formChange}\r\n              />\r\n            </div>\r\n            {props.type === 'edit'?\"\":\r\n            <div>\r\n              启用状态：\r\n              <Switch\r\n                checked={enabled}\r\n                id=\"enabled\"\r\n                onChange={switchChange}\r\n                color=\"primary\"\r\n                name=\"enabled\"\r\n                inputProps={{ 'aria-label': 'primary checkbox' }}\r\n              />\r\n            </div>\r\n            }\r\n            <div>\r\n              录像状态：\r\n              <Switch\r\n                checked={saveVideo}\r\n                id=\"saveVideo\"\r\n                onChange={switchChange}\r\n                color=\"primary\"\r\n                name=\"saveVideo\"\r\n                inputProps={{ 'aria-label': 'primary checkbox' }}\r\n              />\r\n            </div>\r\n            <div>\r\n              直播状态：\r\n              <Switch\r\n                checked={live}\r\n                id=\"live\"\r\n                onChange={switchChange}\r\n                color=\"primary\"\r\n                name=\"live\"\r\n                inputProps={{ 'aria-label': 'primary checkbox' }}\r\n              />\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListIcon from '@material-ui/icons/List';\r\nimport {NavLink} from 'react-router-dom'\r\nimport Play from './Play';\r\nimport CameraEdit from './CameraEdit';\r\nimport API from '../api/Api';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    position: 'relative',\r\n  }, \r\n  dropdown: {\r\n    position: 'absolute',\r\n    top: 28,\r\n    right: 0,\r\n    left: 0, \r\n    zIndex: 999,\r\n    border: '0px solid',\r\n    padding: 1,\r\n    backgroundColor: '#f8f8f8',\r\n  },\r\n}));\r\n\r\nexport default function ActionList(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [row,setRow] = React.useState(props.row);\r\n\r\n  const handleClick = () => {\r\n    setOpen((prev) => !prev);\r\n  };\r\n\r\n  const handleClickAway = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const enabled=() => {\r\n    row.enabled = row.enabled === 1?0:1\r\n    API.cameraEnabled(row)\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  const saveVideoChange=() => {\r\n    row.saveVideo = row.saveVideo === 1?0:1\r\n    API.cameraSaveVideoChange(row)\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  const liveChange=() => {\r\n    row.live = row.live === 1?0:1\r\n    API.cameraLiveChange(row)\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  const playAuthcodeReset=() => {\r\n    API.cameraPlayAuthcodeReset(row)\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  let playRef = React.createRef();\r\n  function play() {\r\n    setOpen(false);\r\n    playRef.current.handleClickOpen();\r\n  }\r\n\r\n  let editRef = React.createRef();\r\n  function edit() {\r\n    setOpen(false);\r\n    editRef.current.handleClickOpen();\r\n  }\r\n\r\n  return (\r\n    <ClickAwayListener onClickAway={handleClickAway}>\r\n      <div className={classes.root}>\r\n        <button type=\"button\" onClick={handleClick}>\r\n          <ListIcon />\r\n        </button>\r\n        {open ? (\r\n          <div className={classes.dropdown}>\r\n            <List component=\"nav\" aria-label=\"secondary mailbox folders\">\r\n              <ListItem button>\r\n                <ListItemText primary=\"编辑\" onClick={edit}/>\r\n              </ListItem>\r\n              <ListItem button onClick={enabled}>\r\n                {\r\n                  props.row.enabled === 1?\r\n                  <ListItemText primary=\"禁用\" />:<ListItemText primary=\"启用\" />\r\n                }\r\n              </ListItem>\r\n              <ListItem button onClick={play}>\r\n                <ListItemText primary=\"播放\" />\r\n              </ListItem>\r\n              <ListItem button>\r\n                <NavLink exact to={{\r\n                  pathname: \"/camerashare\",\r\n                  search: \"?cameraId=\" + props.row.id,\r\n                  // hash: \"#camerashare\",\r\n                  state: { row: props.row }\r\n                }}>分享</NavLink>\r\n              </ListItem>\r\n              <ListItem button>\r\n                <ListItemText primary=\"重置播放权限码\" onClick={playAuthcodeReset}/>\r\n              </ListItem>\r\n              <ListItem button onClick={saveVideoChange}>\r\n                {\r\n                  props.row.saveVideo === 1?\r\n                  <ListItemText primary=\"停止录像\" />:<ListItemText primary=\"开启录像\" />\r\n                }\r\n              </ListItem>\r\n              <ListItem button onClick={liveChange}>\r\n                {\r\n                  props.row.live === 1?\r\n                  <ListItemText primary=\"停止直播\" />:<ListItemText primary=\"开启直播\" />\r\n                }\r\n              </ListItem>\r\n            </List>\r\n          </div>\r\n        ) : null}\r\n        <Play playParam={ {playMethod:\"permanent\",cameraCode:props.row.code,authCode:props.row.playAuthCode } } onRef={playRef}/>\r\n        <CameraEdit row={props.row} type=\"edit\" callBack={props.callBack} onRef={editRef}/>\r\n      </div>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport LinkOffIcon from '@material-ui/icons/LinkOff';\r\nimport LinkIcon from '@material-ui/icons/Link';\r\nimport ActionList from './ActionList';\r\nimport CameraEdit from './CameraEdit';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport API from '../api/Api';\r\n\r\nconst columns = [\r\n  { \r\n    id: 'id',\r\n    label: 'id',\r\n    minWidth: 20\r\n  },\r\n  { \r\n    id: 'code', \r\n    label: '摄像头编号', \r\n    minWidth: 20 \r\n  },\r\n  {\r\n    id: 'rtspURL',\r\n    label: 'rtspURL',\r\n  },\r\n  {\r\n    id: 'rtmpURL',\r\n    label: 'rtmpURL',\r\n  },\r\n  {\r\n    id: 'playAuthCode',\r\n    label: '播放权限码',\r\n  },\r\n  {\r\n    id: 'onlineStatus',\r\n    label: '在线状态',\r\n    format: (value) => value && value === 1?<LinkIcon/>:<LinkOffIcon/>,\r\n  },\r\n  {\r\n    id: 'enabled',\r\n    label: '启用状态',\r\n    format: (value) => {\r\n      return <Switch\r\n              checked={value === 1}\r\n              id=\"enabled\"\r\n              color=\"primary\"\r\n              name=\"enabled\"\r\n              inputProps={{ 'aria-label': 'primary checkbox' }}\r\n            />\r\n    }\r\n  },\r\n  {\r\n    id: 'live',\r\n    label: '直播状态',\r\n    format: (value) => {\r\n      return <Switch\r\n              checked={value === 1}\r\n              id=\"live\"\r\n              color=\"primary\"\r\n              name=\"live\"\r\n              inputProps={{ 'aria-label': 'primary checkbox' }}\r\n            />\r\n    }\r\n  },\r\n  {\r\n    id: 'saveVideo',\r\n    label: '录像状态',\r\n    format: (value) => {\r\n      return <Switch\r\n              checked={value === 1}\r\n              id=\"saveVideo\"\r\n              color=\"primary\"\r\n              name=\"saveVideo\"\r\n              inputProps={{ 'aria-label': 'primary checkbox' }}\r\n            />\r\n    }\r\n  },\r\n  {\r\n    id: 'action',\r\n    label: '操作',\r\n    format: (value,row,callBack) => {return <ActionList row={row} callBack={callBack} />},\r\n  },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    position: 'relative',\r\n  },\r\n  container: {\r\n    minHeight: 400,\r\n  },\r\n  dropdown: {\r\n    position: 'absolute',\r\n    top: 28,\r\n    right: 0,\r\n    left: 0,\r\n    zIndex: 0,\r\n    border: '0px solid',\r\n    padding: 1,\r\n    backgroundColor: '#f8f8f8',\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nexport default function CameraList() {\r\n  const classes = useStyles();\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\r\n  var rows,setRows;\r\n  [rows, setRows] = React.useState([]);\r\n  var editRow = {\r\n    id: \"\",\r\n    code: \"\",\r\n    rtspURL: \"\",\r\n    rtmpURL: \"\",\r\n    playAuthCode: \"\",\r\n    onlineStatus: 0,\r\n    enabled: 1,\r\n    saveVideo: 0,\r\n    live: 1,\r\n  }\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(+event.target.value);\r\n    setPage(0);\r\n  };\r\n\r\n  const getPageList = ()=>{\r\n    API.cameraList()\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        rows.splice(0);\r\n        rows.push(...res.data.page)\r\n        setRows([])\r\n        setRows(rows)\r\n      }\r\n    });\r\n  }\r\n\r\n  let editRef = React.createRef();\r\n  function edit() {\r\n    editRef.current.handleClickOpen();\r\n  }\r\n\r\n  React.useEffect(getPageList,[]) \r\n\r\n  return (\r\n    \r\n    <Paper className={classes.root}>\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar>\r\n          <Button variant=\"contained\" onClick={edit}>\r\n            创建\r\n          </Button>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            摄像头列表\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <CameraEdit row={editRow} type=\"add\" callBack={getPageList} onRef={editRef}/>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  align={column.align}\r\n                  style={{ minWidth: column.minWidth }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n              return (\r\n                <TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n                  {columns.map((column) => {\r\n                    const value = row[column.id];\r\n                    return (\r\n                      <TableCell key={column.id} align={column.align}>\r\n                        {column.format ? column.format(value,row,getPageList) : value}\r\n                      </TableCell>\r\n                    );\r\n                  })}\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[10, 25, 100]}\r\n        component=\"div\"\r\n        count={rows.length}\r\n        rowsPerPage={rowsPerPage}\r\n        page={page}\r\n        onChangePage={handleChangePage}\r\n        onChangeRowsPerPage={handleChangeRowsPerPage}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n","import React, { useImperativeHandle }  from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n}));\r\n\r\nexport default function CopyAlert(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [title, setTitle] = React.useState(props.dialog.title);\r\n  const [content, setContent] = React.useState(props.dialog.content);\r\n\r\n  //用useImperativeHandle暴露一些外部ref能访问的属性\r\n  useImperativeHandle(props.onRef, () => {\r\n    return {\r\n      handleClickOpen: handleClickOpen,\r\n    };\r\n  });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            {content}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            OK\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useImperativeHandle } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Alert, AlertTitle } from '@material-ui/lab';\r\nimport Moment from 'moment'\r\nimport Switch from '@material-ui/core/Switch';\r\nimport API from '../api/Api';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  formClass: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n      width: '25ch',\r\n    },\r\n  },\r\n  formDiv: {\r\n    margin: '0 auto',\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CameraShareEdit(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [enabled, setEnabled] = React.useState(props.row.enabled === 1?true:false);\r\n  const cameraCode = props.row.cameraCode\r\n  const [row, setRow] = React.useState({\r\n    id: props.row.id,\r\n    cameraId: props.row.cameraId,\r\n    name: props.row.name,\r\n    authCode: props.row.authCode,\r\n    startTime: props.row.startTime?props.row.startTime:Moment(),\r\n    deadline: props.row.deadline?props.row.deadline:Moment().add(7,\"day\"),\r\n    enabled: props.row.enabled,\r\n  });\r\n  const [alertShow, setAlertShow] = React.useState(false);\r\n  const [alertText, setAlertText] = React.useState(\"\");\r\n\r\n  //用useImperativeHandle暴露一些外部ref能访问的属性\r\n  useImperativeHandle(props.onRef, () => {\r\n    return {\r\n      handleClickOpen: handleClickOpen,\r\n    };\r\n  });\r\n\r\n  const handleClickOpen = () => {\r\n    row.id = props.row.id\r\n    row.cameraId = props.row.cameraId\r\n    row.name = props.row.name\r\n    row.authCode = props.row.authCode\r\n    row.startTime = props.row.startTime?props.row.startTime:Moment()\r\n    row.deadline = props.row.deadline?props.row.deadline:Moment().add(7,\"day\")\r\n    row.enabled = props.row.enabled\r\n    setRow(row)\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const save = (data) => {\r\n    API.cameraShareEdit(row)\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n      setAlertText(res.msg);\r\n      setAlertShow(true);\r\n      window.setTimeout(function (){\r\n        setAlertShow(false);\r\n      },5000)\r\n    });\r\n  };\r\n\r\n  const deleteCamera = (data) => {\r\n    API.cameraShareDelete(row)\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n      setAlertText(res.msg);\r\n      setAlertShow(true);\r\n      window.setTimeout(function (){\r\n        setAlertShow(false);\r\n      },5000)\r\n    });\r\n  };\r\n\r\n  const formChange = (event) => {\r\n    row[event.target.id] = event.target.value\r\n  }\r\n\r\n  const formDateTimeChange = (event) => {\r\n    row[event.target.id] = Moment(event.target.value)\r\n  }\r\n\r\n  const switchChange = (event) => {\r\n    console.log(event.target.checked)\r\n    row[event.target.id] = event.target.checked?1:0\r\n    if(event.target.id===\"enabled\"){\r\n      setEnabled(event.target.checked)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Button variant=\"contained\" onClick={save}>\r\n              保存 \r\n            </Button>\r\n            <span>&nbsp;&nbsp;</span>\r\n            {props.type === 'edit'?\r\n              <Button variant=\"contained\" onClick={deleteCamera}>\r\n                删除\r\n              </Button>:\"\"\r\n            }       \r\n            <Typography variant=\"h6\" className={classes.title}>\r\n            <div>{row.name?row.name+' 分享编辑':'创建分享'} </div>\r\n            </Typography>\r\n            <Button autoFocus color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon />\r\n            </Button>\r\n          </Toolbar>\r\n        </AppBar>{\r\n          alertShow?\r\n          <Alert severity=\"error\">\r\n            <AlertTitle>Error</AlertTitle>\r\n            {alertText} <strong>check it out!</strong>\r\n          </Alert>:\"\"\r\n        }\r\n        \r\n        <div className={classes.formDiv}>\r\n          \r\n          <form className={classes.formClass} noValidate autoComplete=\"off\" onSubmit={save}>\r\n            {props.type === 'edit'?\r\n            <div>\r\n            <TextField \r\n              id=\"id\"\r\n              label=\"id\" \r\n              InputProps={{\r\n                readOnly: true,\r\n              }} \r\n              defaultValue={row.id}\r\n            />\r\n            </div>:\"\"}\r\n            <div>\r\n              <TextField \r\n                id=\"name\" \r\n                label=\"分享名称\" \r\n                defaultValue={row.name}\r\n                onChange={formChange}\r\n              />\r\n            </div>\r\n            {/* <div>\r\n              <TextField \r\n                id=\"authCode\" \r\n                label=\"authCode\" \r\n                defaultValue={row.authCode}\r\n                onChange={formChange}\r\n              />\r\n            </div> */}\r\n            <div>\r\n              <TextField\r\n                id=\"startTime\"\r\n                label=\"开始时间\"\r\n                type=\"datetime-local\"\r\n                defaultValue={row.startTime?Moment(row.startTime).format(\"YYYY-MM-DDTHH:mm\"):Moment().format(\"YYYY-MM-DDTHH:mm\")}\r\n                // className={classes.textField}\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n                onChange={formDateTimeChange}\r\n              />\r\n            </div>\r\n            <div>\r\n              <TextField\r\n                id=\"deadline\"\r\n                label=\"截止日期\"\r\n                type=\"datetime-local\"\r\n                defaultValue={row.deadline?Moment(row.deadline).format(\"YYYY-MM-DDTHH:mm\"):Moment().add(7,\"day\").format(\"YYYY-MM-DDTHH:mm\")}\r\n                // className={classes.textField}\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n                onChange={formDateTimeChange}\r\n              />\r\n            </div>\r\n            {props.type === 'edit'?\"\":\r\n            <div>\r\n              <Switch\r\n                checked={enabled}\r\n                id=\"enabled\"\r\n                onChange={switchChange}\r\n                color=\"primary\"\r\n                name=\"enabled\"\r\n                inputProps={{ 'aria-label': 'primary checkbox' }}\r\n              />\r\n            </div>\r\n            }\r\n          </form>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListIcon from '@material-ui/icons/List';\r\nimport Copy from 'copy-to-clipboard';\r\nimport CopyAlert from './CopyAlert'\r\nimport Play from '../camera/Play';\r\nimport CameraEdit from './CameraShareEdit';\r\nimport API from '../api/Api';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    position: 'relative',\r\n  }, \r\n  dropdown: {\r\n    position: 'absolute',\r\n    top: 28,\r\n    right: 0,\r\n    left: 0, \r\n    zIndex: 999,\r\n    border: '0px solid',\r\n    padding: 1,\r\n    backgroundColor: '#f8f8f8',\r\n  },\r\n}));\r\n\r\nexport default function ActionList(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [dialogObj, setDialogObj] = React.useState({title:\"Success\",content:\"copy success !\"});\r\n  const [row,setRow] = React.useState(props.row);\r\n\r\n  const handleClick = () => {\r\n    setOpen((prev) => !prev);\r\n  };\r\n\r\n  const handleClickAway = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const enabled=() => {\r\n    row.enabled = row.enabled === 1?0:1\r\n    API.cameraShareEnabled(row)\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  let playRef = React.createRef();\r\n  function play() {\r\n    setOpen(false);\r\n    setRow(props.row)\r\n    playRef.current.handleClickOpen();\r\n  }\r\n\r\n  let editRef = React.createRef();\r\n  function edit() {\r\n    setOpen(false);\r\n    editRef.current.handleClickOpen();\r\n  }\r\n\r\n  let copyRef = React.createRef();\r\n  function share() {\r\n    setOpen(false);\r\n    let sURL = window.location.origin+window.location.pathname+\"#/live?method=temp&code=\"+props.row.cameraCode+\"&authCode=\"+props.row.authCode\r\n    Copy(sURL);\r\n    copyRef.current.handleClickOpen();\r\n  }\r\n\r\n  return (\r\n    <ClickAwayListener onClickAway={handleClickAway}>\r\n      <div className={classes.root}>\r\n        <button type=\"button\" onClick={handleClick}>\r\n          <ListIcon />\r\n        </button>\r\n        {open ? (\r\n          <div className={classes.dropdown}>\r\n            <List component=\"nav\" aria-label=\"secondary mailbox folders\">\r\n              <ListItem button>\r\n                <ListItemText primary=\"编辑\" onClick={edit}/>\r\n              </ListItem>\r\n              <ListItem button onClick={enabled}>\r\n                {\r\n                  props.row.enabled === 1?\r\n                  <ListItemText primary=\"禁用\" />:<ListItemText primary=\"启用\" />\r\n                }\r\n              </ListItem>\r\n              <ListItem button onClick={play}>\r\n                <ListItemText primary=\"播放\" />\r\n              </ListItem>\r\n              <ListItem button onClick={share}>\r\n                <ListItemText primary=\"分享\" />\r\n              </ListItem>\r\n            </List>\r\n          </div>\r\n        ) : null}\r\n        <Play playParam={ {playMethod:\"temp\",cameraCode:row.cameraCode,authCode:row.authCode } } onRef={playRef}/>\r\n        <CameraEdit row={props.row} type=\"edit\" callBack={props.callBack} onRef={editRef}/>\r\n        <CopyAlert dialog={dialogObj} onRef={copyRef}/>\r\n      </div>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport {NavLink} from 'react-router-dom'\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Moment from 'moment'\r\nimport ActionList from './ActionList';\r\nimport CameraShareEdit from './CameraShareEdit';\r\nimport API from '../api/Api';\r\n\r\nconst columns = [\r\n  { \r\n    id: 'id',\r\n    label: 'id',\r\n    minWidth: 170\r\n  },\r\n  {\r\n    id: 'name',\r\n    label: '分享名称',\r\n  },\r\n  {\r\n    id: 'authCode',\r\n    label: '权限码',\r\n  },\r\n  {\r\n    id: 'startTime',\r\n    label: '开始时间',\r\n    format: (value) => {\r\n        let offset = new Date().getTimezoneOffset()\r\n        return value?Moment(value).format(\"YYYY-MM-DD HH:mm\"):\"---\"\r\n    }\r\n  },\r\n  {\r\n    id: 'deadline',\r\n    label: '截止时间',\r\n    format: (value) => {\r\n      let offset = new Date().getTimezoneOffset()\r\n        return value?Moment(value).format(\"YYYY-MM-DD HH:mm\"):\"---\"\r\n    }\r\n  },\r\n  {\r\n    id: 'enabled',\r\n    label: '启用状态',\r\n    format: (value) => {\r\n      return <Switch\r\n              checked={value === 1}\r\n              id=\"enabled\"\r\n              color=\"primary\"\r\n              name=\"enabled\"\r\n              inputProps={{ 'aria-label': 'primary checkbox' }}\r\n            />\r\n    }\r\n  },\r\n  {\r\n    id: 'action',\r\n    label: '操作',\r\n    format: (value,row,camera,callBack) => {\r\n      row.cameraId = camera.id\r\n      row.cameraCode = camera.code\r\n      return <ActionList row={row} callBack={callBack} />},\r\n  },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    position: 'relative',\r\n  },\r\n  container: {\r\n    minHeight: 400,\r\n  },\r\n  dropdown: {\r\n    position: 'absolute',\r\n    top: 28,\r\n    right: 0,\r\n    left: 0,\r\n    zIndex: 0,\r\n    border: '0px solid',\r\n    padding: 1,\r\n    backgroundColor: '#f8f8f8',\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nexport default function CameraShareList(props) {\r\n  const classes = useStyles();\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\r\n  const [rows,setRows]  = React.useState([]);\r\n  const [editRow,setEditRow]  = React.useState({\r\n    id: \"\",\r\n    cameraId: \"\",\r\n    cameraCode: \"\",\r\n    name: \"\",\r\n    authCode: \"\",\r\n    enabled: 1,\r\n    startTime: \"\",\r\n    deadline: \"\",\r\n  });\r\n  const [camera,setCamera] = React.useState({})\r\n\r\n  const getQueryString = (name) => {\r\n    let reg = new RegExp(\"(^|&|\\\\?)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n    let r = window.location.hash.substr(1).match(reg);\r\n    if (r != null) {\r\n        return decodeURIComponent(r[2]);\r\n    };\r\n    return null;\r\n  }\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(+event.target.value);\r\n    setPage(0);\r\n  };\r\n\r\n  const getPageList = ()=>{\r\n    let cameraId = getQueryString(\"cameraId\")\r\n    API.cameraDetail({id:cameraId})\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        let camera = res.data\r\n        if (!camera){\r\n          return\r\n        }\r\n        setCamera(camera)\r\n        let editRowNew = editRow\r\n        editRowNew.cameraId = camera.id\r\n        editRowNew.cameraCode = camera.code\r\n        setEditRow(editRowNew)\r\n        API.cameraShareList({cameraId:camera.id})\r\n        .then(res => {\r\n          if (res.code === 1) {\r\n            rows.splice(0);\r\n            rows.push(...res.data.page)\r\n            setRows([])\r\n            setRows(rows)\r\n          }\r\n        });\r\n      }\r\n    });\r\n    \r\n  }\r\n\r\n  let editRef = React.createRef();\r\n  function edit() {\r\n    setEditRow({})\r\n    setEditRow(editRow)\r\n    editRef.current.handleClickOpen();\r\n  }\r\n\r\n  React.useEffect(getPageList,[]) \r\n\r\n  return (\r\n    \r\n    <Paper className={classes.root}>\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar>\r\n          <Button variant=\"contained\" onClick={edit}>\r\n            创建\r\n          </Button>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n          摄像头: {camera.code?camera.code:'--'} 分享列表\r\n          </Typography>\r\n          <Button variant=\"contained\">\r\n            <NavLink exact to={{\r\n              pathname: \"/\",\r\n              // search: \"?sort=name\",\r\n              // hash: \"#camerashare\",\r\n              state: { }\r\n            }}>返回</NavLink>\r\n          </Button>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <CameraShareEdit row={editRow} type=\"add\" callBack={getPageList} onRef={editRef}/>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  align={column.align}\r\n                  style={{ minWidth: column.minWidth }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n              return (\r\n                <TableRow hover role=\"checkbox\" tabIndex={-1} key={row.id}>\r\n                  {columns.map((column) => {\r\n                    const value = row[column.id];\r\n                    return (\r\n                      <TableCell key={column.id} align={column.align}>\r\n                        {column.format ? column.format(value,row,camera,getPageList) : value}\r\n                      </TableCell>\r\n                    );\r\n                  })}\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[10, 25, 100]}\r\n        component=\"div\"\r\n        count={rows.length}\r\n        rowsPerPage={rowsPerPage}\r\n        page={page}\r\n        onChangePage={handleChangePage}\r\n        onChangeRowsPerPage={handleChangeRowsPerPage}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n","import React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Alert, AlertTitle } from '@material-ui/lab';\nimport API from '../api/Api';\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\n        Your Website\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100vh',\n  },\n  image: {\n    backgroundImage: 'url(https://source.unsplash.com/random)',\n    backgroundRepeat: 'no-repeat',\n    backgroundColor:\n      theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: 'cover',\n    backgroundPosition: 'center',\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function SignInSide() {\n  const classes = useStyles();\n  const [user, setUser] = React.useState({userName:\"\",password:\"\"});\n  const [alertShow, setAlertShow] = React.useState(false);\n  const [alertText, setAlertText] = React.useState(\"\");\n\n  const onLoad = () =>{\n    if ( window.localStorage.getItem(\"tokenExpired\") === \"true\"){\n      localStorage.setItem(\"tokenExpired\", \"false\");\n    }\n  }\n\n  const login = (event) => {\n    API.login(user)\n    .then(res => {\n      if (res.code === 1) {\n        let localStorage = window.localStorage\n        localStorage.setItem(\"token\",res.data.token)\n        localStorage.setItem(\"tokenExpired\", \"false\");\n        window.location.hash = \"#/\" \n        return;\n      }\n      setAlertText(res.msg);\n      setAlertShow(true);\n    });\n  }\n\n  const formChange = (event) => {\n    user[event.target.id] = event.target.value\n  }\n\n  React.useEffect(onLoad,[]) \n\n  return (\n    <Grid container component=\"main\" className={classes.root}>\n      <CssBaseline />\n      <Grid item xs={false} sm={4} md={7} className={classes.image} />\n      <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\n        <div className={classes.paper}>\n          <Avatar className={classes.avatar}>\n            <LockOutlinedIcon />\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">\n            Sign in\n          </Typography>\n          {\n          alertShow?\n          <Alert severity=\"error\">\n            <AlertTitle>Error</AlertTitle>\n            {alertText} <strong>check it out!</strong>\n          </Alert>:\"\"\n        }\n          <form className={classes.form} noValidate>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"userName\"\n              label=\"UserName\"\n              name=\"userName\"\n              autoComplete=\"userName\"\n              autoFocus\n              onChange={formChange}\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n              onChange={formChange}\n            />\n            <FormControlLabel\n              control={<Checkbox value=\"remember\" color=\"primary\" />}\n              label=\"Remember me\"\n            />\n            <Button\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.submit}\n              onClick={login}\n            >\n              Sign In\n            </Button>\n            <Grid container>\n              <Grid item xs>\n                <Link href=\"#\" variant=\"body2\">\n                  Forgot password?\n                </Link>\n              </Grid>\n              <Grid item>\n                <Link href=\"#\" variant=\"body2\">\n                  {\"Don't have an account? Sign Up\"}\n                </Link>\n              </Grid>\n            </Grid>\n            <Box mt={5}>\n              <Copyright />\n            </Box>\n          </form>\n        </div>\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\r\n\r\nexport default class error extends React.Component{\r\n    render(){\r\n        return(\r\n            <h2>404</h2>\r\n        );\r\n    }\r\n}","import React, { useImperativeHandle } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Flv from 'flv.js';\r\nimport API from '../api/Api';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: 'relative',\r\n    backgroundColor: '#eebbaa',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  videoContainer: {\r\n    width: '90%',\r\n    margin: '0 auto'\r\n  },\r\n}));\r\n\r\nexport default function Play(props) {\r\n  const classes = useStyles();\r\n  const [audio, setAudio] = React.useState(true);\r\n  var player = null;\r\n  var lastDecodedFrame = 0\r\n\r\n  const switchChange = (event) => {\r\n    setAudio(event.target.checked)\r\n  }\r\n\r\n  const getQueryString = (name) => {\r\n    let reg = new RegExp(\"(^|&|\\\\?)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n    let r = window.location.hash.substr(1).match(reg);\r\n    if (r != null) {\r\n        return decodeURIComponent(r[2]);\r\n    };\r\n    return null;\r\n  }\r\n\r\n  const flv_load = (val) => {\r\n    let method = getQueryString(\"method\");\r\n    let code = getQueryString(\"code\");\r\n    let authCode = getQueryString(\"authCode\");\r\n    if(!method || !code || !authCode){\r\n      return\r\n    }\r\n    var mediaDataSource = {\r\n      type: 'flv'\r\n    };\r\n    let videoUrl = API.flvURL+\"/live/\"+method+\"/\"+code+\"/\"+authCode+\".flv\";\r\n    // let videoUrl = window.origin.substring(0,window.origin.lastIndexOf(\":\"))+\":9091/live/\"+method+\"/\"+code+\"/\"+authCode+\".flv\";\r\n    mediaDataSource['url'] = videoUrl;\r\n    mediaDataSource['hasAudio'] = audio;\r\n    mediaDataSource['isLive'] = true;\r\n    console.log('MediaDataSource', mediaDataSource);\r\n    flv_load_mds(mediaDataSource);\r\n  }\r\n\r\n  const flv_load_mds = (mediaDataSource) => {\r\n      var element = document.getElementsByClassName('centeredVideo')[0];\r\n    \r\n      if (typeof player !== \"undefined\") {\r\n          if (player != null) {\r\n            player.pause();\r\n            player.unload();\r\n            player.detachMediaElement();\r\n            player.destroy();\r\n            player= null;\r\n          }\r\n      }\r\n      \r\n      player = Flv.createPlayer(mediaDataSource, {\r\n          enableWorker: false,\r\n          lazyLoadMaxDuration: 3 * 60,\r\n          seekType: 'range',\r\n      });\r\n      player.on(Flv.Events.ERROR, (errorType, errorDetail, errorInfo) => {\r\n        console.log(\"errorType:\", errorType);\r\n        console.log(\"errorDetail:\", errorDetail);\r\n        console.log(\"errorInfo:\", errorInfo);\r\n        //视频出错后销毁重新创建\r\n        if (player) {\r\n          player.pause();\r\n          player.unload();\r\n          player.detachMediaElement();\r\n          player.destroy();\r\n          player= null;\r\n          window.setTimeout(flv_load,500)\r\n        }\r\n      });\r\n      //画面卡死\r\n      player.on(Flv.Events.STATISTICS_INFO, function (res) {\r\n        if (lastDecodedFrame == 0) {\r\n          lastDecodedFrame = res.decodedFrames;\r\n          return;\r\n        }\r\n        if (lastDecodedFrame != res.decodedFrames) {\r\n          lastDecodedFrame = res.decodedFrames;\r\n        } else {\r\n            console.log(\"decodedFrames:\", res.decodedFrames)\r\n            lastDecodedFrame = 0;\r\n            if (player) {\r\n              player.pause();\r\n              player.unload();\r\n              player.detachMediaElement();\r\n              player.destroy();\r\n              player= null;\r\n              window.setTimeout(flv_load,500)\r\n          }\r\n        }\r\n      });\r\n      player.attachMediaElement(element);\r\n      player.load();\r\n      player.play()\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Button variant=\"contained\" onClick={flv_load}>\r\n              play\r\n            </Button>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n            hasAudio\r\n              <Switch\r\n                checked={audio}\r\n                id=\"Audio\"\r\n                color=\"primary\"\r\n                name=\"hasAudio\"\r\n                onChange={switchChange}\r\n                inputProps={{ 'aria-label': 'primary checkbox' }}\r\n              />\r\n            </Typography>\r\n            {/* <Button autoFocus color=\"inherit\">\r\n              <CloseIcon />\r\n            </Button> */}\r\n          </Toolbar>\r\n        </AppBar>\r\n        <div className={classes.videoContainer}>\r\n            <div>\r\n                <video name=\"videoElement\" className=\"centeredVideo\" controls allow=\"autoPlay\" width=\"100%\" >\r\n                    Your browser is too old which doesn't support HTML5 video.\r\n                </video>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { memo } from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport CameraList from '../camera/CameraList';\r\nimport CameraShareList from '../camerashare/CameraShareList';\r\nimport SignInSide from '../login/SignInSide';\r\nimport NoMatch from '../404/NoMatch';\r\nimport Live from '../camera/Live';\r\n\r\nfunction Routing(props) {\r\n    return (\r\n      <Switch>\r\n        <Route exact path=\"/\" component={CameraList} />\r\n        <Route exact path=\"/camerashare\" component={CameraShareList} />\r\n        <Route exact path=\"/live\" component={Live} /> \r\n        <Route path=\"/login\" component={SignInSide} />\r\n        <Route component={NoMatch} />\r\n      </Switch>\r\n    );\r\n  }\r\n  \r\n  export default memo(Routing);\r\n","import { HashRouter } from \"react-router-dom\";\r\nimport Routing from './route/Routing';\r\n\r\nfunction Rtsp2rtmp() {\r\n  return (\r\n    <div>\r\n        <HashRouter>\r\n            <Routing/>\r\n        </HashRouter>\r\n    </div>\r\n  );\r\n} \r\n\r\nexport default Rtsp2rtmp;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Rtsp2rtmp from './Rtsp2rtmp';\n\nfunction App() {\n  return (\n    <Rtsp2rtmp />\n  );\n}\n\nReactDOM.render(<App />, document.querySelector('#app'));"],"sourceRoot":""}
(this.webpackJsonprtsp2rtmpweb=this.webpackJsonprtsp2rtmpweb||[]).push([[0],{173:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(13),o=t.n(c),i=t(55),l=t(16),d=t(86),s=t(10),u=t(211),j=t(175),b=t(227),m=t(231),h=t(230),p=t(226),f=t(228),O=t(245),x=t(229),v=t(119),g=t.n(v),w=t(118),k=t.n(w),y=t(223),C=t(222),S=t(224),R=t(225),I=t(84),N=t.n(I),T=t(64),B=t(217),P=t(247),L=t(215),E=t(216),M=t(42),V=t(218),Y=t(54),D=t.n(Y),U=t(213),H=t(49),F={serverURL:window.location.origin},A=t(37),W=t.n(A);W.a.defaults.withCredentials=!1,W.a.defaults.timeout=1e4,W.a.interceptors.request.use((function(e){var a=window.localStorage.getItem("token");return e.headers.token=a,e}),(function(e){return console.error(e),Promise.reject(e)})),W.a.interceptors.response.use((function(e){return e.data&&e.data.errcode&&401===parseInt(e.data.errcode)&&(window.location.hash="#/login"),e}),(function(e){return W.a.isCancel()||(e.response?(console.log(401===e.response.status),401===e.response.status?window.localStorage.getItem("token")&&window.localStorage.getItem("tokenExpired")&&"false"!==window.localStorage.getItem("tokenExpired")||(window.localStorage.setItem("tokenExpired","true"),window.location.hash="#/login"):500===e.response.status&&alert("server exception !")):e&&"error: timeout"===String(e).toLowerCase().substring(0,14)?alert("server timeout !"):alert("server error !")),Promise.reject(e)}));var z=F.serverURL,q=function(e,a){return W.a.post("".concat(z).concat(e),a).then((function(e){return e.data}))},J=function(e,a){return W.a.get("".concat(z).concat(e),{params:a}).then((function(e){return e.data}))},$="".concat(F.serverURL),_=function(e){return q("/system/login",e)},K=function(e){return J("/camera/list",e)},G=function(e){return J("/camera/detail",e)},Q=function(e){return q("/camera/edit",e)},X=function(e){return q("/camera/delete/".concat(e.id),e)},Z=function(e){return q("/camera/enabled",e)},ee=function(e){return q("/camera/savevideochange",e)},ae=function(e){return q("/camera/livechange",e)},te=function(e){return q("/camera/playauthcodereset",e)},ne=function(e){return J("/camerashare/list",e)},re=function(e){return q("/camerashare/edit",e)},ce=function(e){return q("/camerashare/delete/".concat(e.id),e)},oe=function(e){return q("/camerashare/enabled",e)},ie=t(2),le=Object(u.a)((function(e){return{appBar:{position:"relative",backgroundColor:"#eebbaa"},title:{marginLeft:e.spacing(2),flex:1},videoContainer:{width:"90%",margin:"0 auto"}}})),de=r.a.forwardRef((function(e,a){return Object(ie.jsx)(U.a,Object(T.a)({direction:"up",ref:a},e))}));function se(e){var a=le(),t=r.a.useState(!1),c=Object(s.a)(t,2),o=c[0],i=c[1],l=r.a.useState(!0),d=Object(s.a)(l,2),u=d[0],j=d[1],b=r.a.useState(e.playParam||{playMethod:"",cameraCode:"",authCode:""}),m=Object(s.a)(b,2),h=m[0],p=(m[1],null),f=0;Object(n.useImperativeHandle)(e.onRef,(function(){return{handleClickOpen:O}}));var O=function(){i(!0)},x=function(){i(!1)},v=function(e){var a={type:"flv"},t=$+"/live/"+h.playMethod+"/"+h.cameraCode+"/"+h.authCode+".flv";a.url=t,a.hasAudio=u,a.isLive=!0,console.log("MediaDataSource",a),g(a)},g=function(e){var a=document.getElementsByClassName("centeredVideo")[0];"undefined"!==typeof p&&null!=p&&(p.pause(),p.unload(),p.detachMediaElement(),p.destroy(),p=null),(p=H.a.createPlayer(e,{enableWorker:!1,lazyLoadMaxDuration:180,seekType:"range"})).on(H.a.Events.ERROR,(function(e,a,t){console.log("errorType:",e),console.log("errorDetail:",a),console.log("errorInfo:",t),p&&(p.pause(),p.unload(),p.detachMediaElement(),p.destroy(),p=null,window.setTimeout(v,500))})),p.on(H.a.Events.STATISTICS_INFO,(function(e){0!=f?f!=e.decodedFrames?f=e.decodedFrames:(console.log("decodedFrames:",e.decodedFrames),f=0,p&&(p.pause(),p.unload(),p.detachMediaElement(),p.destroy(),p=null,window.setTimeout(v,500))):f=e.decodedFrames})),p.attachMediaElement(a),p.load(),p.play()};return Object(ie.jsx)("div",{children:Object(ie.jsxs)(P.a,{fullScreen:!0,open:o,onClose:x,TransitionComponent:de,children:[Object(ie.jsx)(L.a,{className:a.appBar,children:Object(ie.jsxs)(E.a,{children:[Object(ie.jsx)(B.a,{variant:"contained",onClick:v,children:"play"}),Object(ie.jsxs)(M.a,{variant:"h6",className:a.title,children:["hasAudio",Object(ie.jsx)(V.a,{checked:u,id:"Audio",color:"primary",name:"hasAudio",onChange:function(e){j(e.target.checked)},inputProps:{"aria-label":"primary checkbox"}})]}),Object(ie.jsx)(B.a,{autoFocus:!0,color:"inherit",onClick:x,children:Object(ie.jsx)(D.a,{})})]})}),Object(ie.jsx)("div",{className:a.videoContainer,children:Object(ie.jsx)("div",{children:Object(ie.jsx)("video",{name:"videoElement",className:"centeredVideo",controls:!0,allow:"autoPlay",width:"100%",children:"Your browser is too old which doesn't support HTML5 video."})})})]})})}var ue=t(244),je=t(242),be=t(219),me=Object(u.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},formClass:{"& > *":{margin:e.spacing(1),width:"25ch"}},formDiv:{margin:"0 auto"}}})),he=r.a.forwardRef((function(e,a){return Object(ie.jsx)(U.a,Object(T.a)({direction:"up",ref:a},e))}));function pe(e){var a=me(),t=r.a.useState(!1),c=Object(s.a)(t,2),o=c[0],i=c[1],l=r.a.useState(1===e.row.enabled),d=Object(s.a)(l,2),u=d[0],j=d[1],b=r.a.useState(1===e.row.saveVideo),m=Object(s.a)(b,2),h=m[0],p=m[1],f=r.a.useState(1===e.row.live),O=Object(s.a)(f,2),x=O[0],v=O[1],g=r.a.useState({id:e.row.id,code:e.row.code,rtspURL:e.row.rtspURL,rtmpURL:e.row.rtmpURL,playAuthCode:e.row.playAuthCode,onlineStatus:e.row.onlineStatus,enabled:e.row.enabled,saveVideo:e.row.saveVideo,live:e.row.live}),w=Object(s.a)(g,2),k=w[0],y=(w[1],r.a.useState(!1)),C=Object(s.a)(y,2),S=C[0],R=C[1],I=r.a.useState(""),N=Object(s.a)(I,2),T=N[0],Y=N[1];Object(n.useImperativeHandle)(e.onRef,(function(){return{handleClickOpen:U}}));var U=function(){i(!0)},H=function(){i(!1)},F=function(a){Q(k).then((function(a){if(1===a.code)return i(!1),void(e.callBack&&e.callBack());Y(a.msg),R(!0),window.setTimeout((function(){R(!1)}),5e3)}))},A=function(e){k[e.target.id]=e.target.value},W=function(e){console.log(e.target.checked),k[e.target.id]=e.target.checked?1:0,"enabled"===e.target.id&&j(e.target.checked),"saveVideo"===e.target.id&&p(e.target.checked),"live"===e.target.id&&v(e.target.checked)};return Object(ie.jsx)("div",{children:Object(ie.jsxs)(P.a,{fullScreen:!0,open:o,onClose:H,TransitionComponent:he,children:[Object(ie.jsx)(L.a,{className:a.appBar,children:Object(ie.jsxs)(E.a,{children:[Object(ie.jsx)(B.a,{variant:"contained",onClick:F,children:"\u4fdd\u5b58"}),Object(ie.jsx)("span",{children:"\xa0\xa0"}),"edit"===e.type?Object(ie.jsx)(B.a,{variant:"contained",onClick:function(a){X(k).then((function(a){if(1===a.code)return i(!1),void(e.callBack&&e.callBack());Y(a.msg),R(!0),window.setTimeout((function(){R(!1)}),5e3)}))},children:"\u5220\u9664"}):"",Object(ie.jsx)(M.a,{variant:"h6",className:a.title}),Object(ie.jsx)(B.a,{autoFocus:!0,color:"inherit",onClick:H,children:Object(ie.jsx)(D.a,{})})]})}),S?Object(ie.jsxs)(je.a,{severity:"error",children:[Object(ie.jsx)(be.a,{children:"Error"}),T," ",Object(ie.jsx)("strong",{children:"check it out!"})]}):"",Object(ie.jsx)("div",{className:a.formDiv,children:Object(ie.jsxs)("form",{className:a.formClass,noValidate:!0,autoComplete:"off",onSubmit:F,children:["edit"===e.type?Object(ie.jsx)("div",{children:Object(ie.jsx)(ue.a,{id:"id",label:"id",InputProps:{readOnly:!0},defaultValue:k.id})}):"",Object(ie.jsx)("div",{children:Object(ie.jsx)(ue.a,{id:"code",label:"\u6444\u50cf\u5934\u7f16\u53f7",defaultValue:k.code,onChange:A})}),Object(ie.jsx)("div",{children:Object(ie.jsx)(ue.a,{id:"rtspURL",label:"rtspURL",defaultValue:k.rtspURL,onChange:A})}),Object(ie.jsx)("div",{children:Object(ie.jsx)(ue.a,{id:"rtmpURL",label:"rtmpURL",defaultValue:k.rtmpURL,onChange:A})}),"edit"===e.type?"":Object(ie.jsxs)("div",{children:["\u542f\u7528\u72b6\u6001\uff1a",Object(ie.jsx)(V.a,{checked:u,id:"enabled",onChange:W,color:"primary",name:"enabled",inputProps:{"aria-label":"primary checkbox"}})]}),Object(ie.jsxs)("div",{children:["\u5f55\u50cf\u72b6\u6001\uff1a",Object(ie.jsx)(V.a,{checked:h,id:"saveVideo",onChange:W,color:"primary",name:"saveVideo",inputProps:{"aria-label":"primary checkbox"}})]}),Object(ie.jsxs)("div",{children:["\u76f4\u64ad\u72b6\u6001\uff1a",Object(ie.jsx)(V.a,{checked:x,id:"live",onChange:W,color:"primary",name:"live",inputProps:{"aria-label":"primary checkbox"}})]})]})})]})})}var fe=Object(u.a)((function(){return{root:{position:"relative"},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:999,border:"0px solid",padding:1,backgroundColor:"#f8f8f8"}}}));function Oe(e){var a=fe(),t=r.a.useState(!1),n=Object(s.a)(t,2),c=n[0],o=n[1],l=r.a.useState(e.row),d=Object(s.a)(l,2),u=d[0],j=(d[1],r.a.createRef());var b=r.a.createRef();return Object(ie.jsx)(y.a,{onClickAway:function(){o(!1)},children:Object(ie.jsxs)("div",{className:a.root,children:[Object(ie.jsx)("button",{type:"button",onClick:function(){o((function(e){return!e}))},children:Object(ie.jsx)(N.a,{})}),c?Object(ie.jsx)("div",{className:a.dropdown,children:Object(ie.jsxs)(C.a,{component:"nav","aria-label":"secondary mailbox folders",children:[Object(ie.jsx)(S.a,{button:!0,children:Object(ie.jsx)(R.a,{primary:"\u7f16\u8f91",onClick:function(){o(!1),b.current.handleClickOpen()}})}),Object(ie.jsx)(S.a,{button:!0,onClick:function(){u.enabled=1===u.enabled?0:1,Z(u).then((function(a){if(1===a.code)return o(!1),void(e.callBack&&e.callBack())}))},children:1===e.row.enabled?Object(ie.jsx)(R.a,{primary:"\u7981\u7528"}):Object(ie.jsx)(R.a,{primary:"\u542f\u7528"})}),Object(ie.jsx)(S.a,{button:!0,onClick:function(){o(!1),j.current.handleClickOpen()},children:Object(ie.jsx)(R.a,{primary:"\u64ad\u653e"})}),Object(ie.jsx)(S.a,{button:!0,children:Object(ie.jsx)(i.b,{exact:!0,to:{pathname:"/camerashare",search:"?cameraId="+e.row.id,state:{row:e.row}},children:"\u5206\u4eab"})}),Object(ie.jsx)(S.a,{button:!0,children:Object(ie.jsx)(R.a,{primary:"\u91cd\u7f6e\u64ad\u653e\u6743\u9650\u7801",onClick:function(){te(u).then((function(a){if(1===a.code)return o(!1),void(e.callBack&&e.callBack())}))}})}),Object(ie.jsx)(S.a,{button:!0,onClick:function(){u.saveVideo=1===u.saveVideo?0:1,ee(u).then((function(a){if(1===a.code)return o(!1),void(e.callBack&&e.callBack())}))},children:1===e.row.saveVideo?Object(ie.jsx)(R.a,{primary:"\u505c\u6b62\u5f55\u50cf"}):Object(ie.jsx)(R.a,{primary:"\u5f00\u542f\u5f55\u50cf"})}),Object(ie.jsx)(S.a,{button:!0,onClick:function(){u.live=1===u.live?0:1,ae(u).then((function(a){if(1===a.code)return o(!1),void(e.callBack&&e.callBack())}))},children:1===e.row.live?Object(ie.jsx)(R.a,{primary:"\u505c\u6b62\u76f4\u64ad"}):Object(ie.jsx)(R.a,{primary:"\u5f00\u542f\u76f4\u64ad"})})]})}):null,Object(ie.jsx)(se,{playParam:{playMethod:"permanent",cameraCode:e.row.code,authCode:e.row.playAuthCode},onRef:j}),Object(ie.jsx)(pe,{row:e.row,type:"edit",callBack:e.callBack,onRef:b})]})})}var xe=[{id:"id",label:"id",minWidth:20},{id:"code",label:"\u6444\u50cf\u5934\u7f16\u53f7",minWidth:20},{id:"rtspURL",label:"rtspURL"},{id:"rtmpURL",label:"rtmpURL"},{id:"playAuthCode",label:"\u64ad\u653e\u6743\u9650\u7801"},{id:"onlineStatus",label:"\u5728\u7ebf\u72b6\u6001",format:function(e){return e&&1===e?Object(ie.jsx)(k.a,{}):Object(ie.jsx)(g.a,{})}},{id:"enabled",label:"\u542f\u7528\u72b6\u6001",format:function(e){return Object(ie.jsx)(V.a,{checked:1===e,id:"enabled",color:"primary",name:"enabled",inputProps:{"aria-label":"primary checkbox"}})}},{id:"live",label:"\u76f4\u64ad\u72b6\u6001",format:function(e){return Object(ie.jsx)(V.a,{checked:1===e,id:"live",color:"primary",name:"live",inputProps:{"aria-label":"primary checkbox"}})}},{id:"saveVideo",label:"\u5f55\u50cf\u72b6\u6001",format:function(e){return Object(ie.jsx)(V.a,{checked:1===e,id:"saveVideo",color:"primary",name:"saveVideo",inputProps:{"aria-label":"primary checkbox"}})}},{id:"action",label:"\u64cd\u4f5c",format:function(e,a,t){return Object(ie.jsx)(Oe,{row:a,callBack:t})}}],ve=Object(u.a)((function(e){return{root:{width:"100%",position:"relative"},container:{minHeight:400},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:0,border:"0px solid",padding:1,backgroundColor:"#f8f8f8"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}}));function ge(){var e,a,t=ve(),n=r.a.useState(0),c=Object(s.a)(n,2),o=c[0],i=c[1],l=r.a.useState(10),u=Object(s.a)(l,2),v=u[0],g=u[1],w=r.a.useState([]),k=Object(s.a)(w,2);e=k[0],a=k[1];var y=function(){K().then((function(t){var n;1===t.code&&(e.splice(0),(n=e).push.apply(n,Object(d.a)(t.data.page)),a([]),a(e))}))},C=r.a.createRef();return r.a.useEffect(y,[]),Object(ie.jsxs)(j.a,{className:t.root,children:[Object(ie.jsx)(L.a,{className:t.appBar,children:Object(ie.jsxs)(E.a,{children:[Object(ie.jsx)(B.a,{variant:"contained",onClick:function(){C.current.handleClickOpen()},children:"\u521b\u5efa"}),Object(ie.jsx)(M.a,{variant:"h6",className:t.title,children:"\u6444\u50cf\u5934\u5217\u8868"})]})}),Object(ie.jsx)(pe,{row:{id:"",code:"",rtspURL:"",rtmpURL:"",playAuthCode:"",onlineStatus:0,enabled:1,saveVideo:0,live:1},type:"add",callBack:y,onRef:C}),Object(ie.jsx)(p.a,{className:t.container,children:Object(ie.jsxs)(b.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(ie.jsx)(f.a,{children:Object(ie.jsx)(x.a,{children:xe.map((function(e){return Object(ie.jsx)(h.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ie.jsx)(m.a,{children:e.slice(o*v,o*v+v).map((function(e){return Object(ie.jsx)(x.a,{hover:!0,role:"checkbox",tabIndex:-1,children:xe.map((function(a){var t=e[a.id];return Object(ie.jsx)(h.a,{align:a.align,children:a.format?a.format(t,e,y):t},a.id)}))},e.code)}))})]})}),Object(ie.jsx)(O.a,{rowsPerPageOptions:[10,25,100],component:"div",count:e.length,rowsPerPage:v,page:o,onChangePage:function(e,a){i(a)},onChangeRowsPerPage:function(e){g(+e.target.value),i(0)}})]})}var we=t(29),ke=t.n(we),ye=t(120),Ce=t.n(ye),Se=t(235),Re=t(233),Ie=t(232),Ne=t(234),Te=Object(u.a)((function(e){return{root:{width:"100%"}}}));function Be(e){var a=Te(),t=r.a.useState(!1),c=Object(s.a)(t,2),o=c[0],i=c[1],l=r.a.useState(e.dialog.title),d=Object(s.a)(l,2),u=d[0],j=(d[1],r.a.useState(e.dialog.content)),b=Object(s.a)(j,2),m=b[0];b[1];Object(n.useImperativeHandle)(e.onRef,(function(){return{handleClickOpen:h}}));var h=function(){i(!0)},p=function(){i(!1)};return Object(ie.jsx)("div",{className:a.root,children:Object(ie.jsxs)(P.a,{open:o,onClose:p,"aria-labelledby":"form-dialog-title",children:[Object(ie.jsx)(Ie.a,{id:"form-dialog-title",children:u}),Object(ie.jsx)(Re.a,{children:Object(ie.jsx)(Ne.a,{children:m})}),Object(ie.jsx)(Se.a,{children:Object(ie.jsx)(B.a,{onClick:p,color:"primary",children:"OK"})})]})})}var Pe=Object(u.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},formClass:{"& > *":{margin:e.spacing(1),width:"25ch"}},formDiv:{margin:"0 auto"}}})),Le=r.a.forwardRef((function(e,a){return Object(ie.jsx)(U.a,Object(T.a)({direction:"up",ref:a},e))}));function Ee(e){var a=Pe(),t=r.a.useState(!1),c=Object(s.a)(t,2),o=c[0],i=c[1],l=r.a.useState(1===e.row.enabled),d=Object(s.a)(l,2),u=d[0],j=d[1],b=(e.row.cameraCode,r.a.useState({id:e.row.id,cameraId:e.row.cameraId,name:e.row.name,authCode:e.row.authCode,startTime:e.row.startTime?e.row.startTime:ke()(),deadline:e.row.deadline?e.row.deadline:ke()().add(7,"day"),enabled:e.row.enabled})),m=Object(s.a)(b,2),h=m[0],p=m[1],f=r.a.useState(!1),O=Object(s.a)(f,2),x=O[0],v=O[1],g=r.a.useState(""),w=Object(s.a)(g,2),k=w[0],y=w[1];Object(n.useImperativeHandle)(e.onRef,(function(){return{handleClickOpen:C}}));var C=function(){h.id=e.row.id,h.cameraId=e.row.cameraId,h.name=e.row.name,h.authCode=e.row.authCode,h.startTime=e.row.startTime?e.row.startTime:ke()(),h.deadline=e.row.deadline?e.row.deadline:ke()().add(7,"day"),h.enabled=e.row.enabled,p(h),i(!0)},S=function(){i(!1)},R=function(a){re(h).then((function(a){if(1===a.code)return i(!1),void(e.callBack&&e.callBack());y(a.msg),v(!0),window.setTimeout((function(){v(!1)}),5e3)}))},I=function(e){h[e.target.id]=ke()(e.target.value)};return Object(ie.jsx)("div",{children:Object(ie.jsxs)(P.a,{fullScreen:!0,open:o,onClose:S,TransitionComponent:Le,children:[Object(ie.jsx)(L.a,{className:a.appBar,children:Object(ie.jsxs)(E.a,{children:[Object(ie.jsx)(B.a,{variant:"contained",onClick:R,children:"\u4fdd\u5b58"}),Object(ie.jsx)("span",{children:"\xa0\xa0"}),"edit"===e.type?Object(ie.jsx)(B.a,{variant:"contained",onClick:function(a){ce(h).then((function(a){if(1===a.code)return i(!1),void(e.callBack&&e.callBack());y(a.msg),v(!0),window.setTimeout((function(){v(!1)}),5e3)}))},children:"\u5220\u9664"}):"",Object(ie.jsx)(M.a,{variant:"h6",className:a.title,children:Object(ie.jsxs)("div",{children:[h.name?h.name+" \u5206\u4eab\u7f16\u8f91":"\u521b\u5efa\u5206\u4eab"," "]})}),Object(ie.jsx)(B.a,{autoFocus:!0,color:"inherit",onClick:S,children:Object(ie.jsx)(D.a,{})})]})}),x?Object(ie.jsxs)(je.a,{severity:"error",children:[Object(ie.jsx)(be.a,{children:"Error"}),k," ",Object(ie.jsx)("strong",{children:"check it out!"})]}):"",Object(ie.jsx)("div",{className:a.formDiv,children:Object(ie.jsxs)("form",{className:a.formClass,noValidate:!0,autoComplete:"off",onSubmit:R,children:["edit"===e.type?Object(ie.jsx)("div",{children:Object(ie.jsx)(ue.a,{id:"id",label:"id",InputProps:{readOnly:!0},defaultValue:h.id})}):"",Object(ie.jsx)("div",{children:Object(ie.jsx)(ue.a,{id:"name",label:"\u5206\u4eab\u540d\u79f0",defaultValue:h.name,onChange:function(e){h[e.target.id]=e.target.value}})}),Object(ie.jsx)("div",{children:Object(ie.jsx)(ue.a,{id:"startTime",label:"\u5f00\u59cb\u65f6\u95f4",type:"datetime-local",defaultValue:h.startTime?ke()(h.startTime).format("YYYY-MM-DDTHH:mm"):ke()().format("YYYY-MM-DDTHH:mm"),InputLabelProps:{shrink:!0},onChange:I})}),Object(ie.jsx)("div",{children:Object(ie.jsx)(ue.a,{id:"deadline",label:"\u622a\u6b62\u65e5\u671f",type:"datetime-local",defaultValue:h.deadline?ke()(h.deadline).format("YYYY-MM-DDTHH:mm"):ke()().add(7,"day").format("YYYY-MM-DDTHH:mm"),InputLabelProps:{shrink:!0},onChange:I})}),"edit"===e.type?"":Object(ie.jsx)("div",{children:Object(ie.jsx)(V.a,{checked:u,id:"enabled",onChange:function(e){console.log(e.target.checked),h[e.target.id]=e.target.checked?1:0,"enabled"===e.target.id&&j(e.target.checked)},color:"primary",name:"enabled",inputProps:{"aria-label":"primary checkbox"}})})]})})]})})}var Me=Object(u.a)((function(){return{root:{position:"relative"},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:999,border:"0px solid",padding:1,backgroundColor:"#f8f8f8"}}}));function Ve(e){var a=Me(),t=r.a.useState(!1),n=Object(s.a)(t,2),c=n[0],o=n[1],i=r.a.useState({title:"Success",content:"copy success !"}),l=Object(s.a)(i,2),d=l[0],u=(l[1],r.a.useState(e.row)),j=Object(s.a)(u,2),b=j[0],m=j[1],h=r.a.createRef();var p=r.a.createRef();var f=r.a.createRef();return Object(ie.jsx)(y.a,{onClickAway:function(){o(!1)},children:Object(ie.jsxs)("div",{className:a.root,children:[Object(ie.jsx)("button",{type:"button",onClick:function(){o((function(e){return!e}))},children:Object(ie.jsx)(N.a,{})}),c?Object(ie.jsx)("div",{className:a.dropdown,children:Object(ie.jsxs)(C.a,{component:"nav","aria-label":"secondary mailbox folders",children:[Object(ie.jsx)(S.a,{button:!0,children:Object(ie.jsx)(R.a,{primary:"\u7f16\u8f91",onClick:function(){o(!1),p.current.handleClickOpen()}})}),Object(ie.jsx)(S.a,{button:!0,onClick:function(){b.enabled=1===b.enabled?0:1,oe(b).then((function(a){if(1===a.code)return o(!1),void(e.callBack&&e.callBack())}))},children:1===e.row.enabled?Object(ie.jsx)(R.a,{primary:"\u7981\u7528"}):Object(ie.jsx)(R.a,{primary:"\u542f\u7528"})}),Object(ie.jsx)(S.a,{button:!0,onClick:function(){o(!1),m(e.row),h.current.handleClickOpen()},children:Object(ie.jsx)(R.a,{primary:"\u64ad\u653e"})}),Object(ie.jsx)(S.a,{button:!0,onClick:function(){o(!1);var a=window.location.origin+window.location.pathname+"#/live?method=temp&code="+e.row.cameraCode+"&authCode="+e.row.authCode;Ce()(a),f.current.handleClickOpen()},children:Object(ie.jsx)(R.a,{primary:"\u5206\u4eab"})})]})}):null,Object(ie.jsx)(se,{playParam:{playMethod:"temp",cameraCode:b.cameraCode,authCode:b.authCode},onRef:h}),Object(ie.jsx)(Ee,{row:e.row,type:"edit",callBack:e.callBack,onRef:p}),Object(ie.jsx)(Be,{dialog:d,onRef:f})]})})}var Ye=[{id:"id",label:"id",minWidth:170},{id:"name",label:"\u5206\u4eab\u540d\u79f0"},{id:"authCode",label:"\u6743\u9650\u7801"},{id:"startTime",label:"\u5f00\u59cb\u65f6\u95f4",format:function(e){(new Date).getTimezoneOffset();return e?ke()(e).format("YYYY-MM-DD HH:mm"):"---"}},{id:"deadline",label:"\u622a\u6b62\u65f6\u95f4",format:function(e){(new Date).getTimezoneOffset();return e?ke()(e).format("YYYY-MM-DD HH:mm"):"---"}},{id:"enabled",label:"\u542f\u7528\u72b6\u6001",format:function(e){return Object(ie.jsx)(V.a,{checked:1===e,id:"enabled",color:"primary",name:"enabled",inputProps:{"aria-label":"primary checkbox"}})}},{id:"action",label:"\u64cd\u4f5c",format:function(e,a,t,n){return a.cameraId=t.id,a.cameraCode=t.code,Object(ie.jsx)(Ve,{row:a,callBack:n})}}],De=Object(u.a)((function(e){return{root:{width:"100%",position:"relative"},container:{minHeight:400},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:0,border:"0px solid",padding:1,backgroundColor:"#f8f8f8"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}}));function Ue(e){var a=De(),t=r.a.useState(0),n=Object(s.a)(t,2),c=n[0],o=n[1],l=r.a.useState(10),u=Object(s.a)(l,2),v=u[0],g=u[1],w=r.a.useState([]),k=Object(s.a)(w,2),y=k[0],C=k[1],S=r.a.useState({id:"",cameraId:"",cameraCode:"",name:"",authCode:"",enabled:1,startTime:"",deadline:""}),R=Object(s.a)(S,2),I=R[0],N=R[1],T=r.a.useState({}),P=Object(s.a)(T,2),V=P[0],Y=P[1],D=function(){var e=function(e){var a=new RegExp("(^|&|\\?)"+e+"=([^&]*)(&|$)","i"),t=window.location.hash.substr(1).match(a);return null!=t?decodeURIComponent(t[2]):null}("cameraId");G({id:e}).then((function(e){if(1===e.code){var a=e.data;if(!a)return;Y(a);var t=I;t.cameraId=a.id,t.cameraCode=a.code,N(t),ne({cameraId:a.id}).then((function(e){1===e.code&&(y.splice(0),y.push.apply(y,Object(d.a)(e.data.page)),C([]),C(y))}))}}))},U=r.a.createRef();return r.a.useEffect(D,[]),Object(ie.jsxs)(j.a,{className:a.root,children:[Object(ie.jsx)(L.a,{className:a.appBar,children:Object(ie.jsxs)(E.a,{children:[Object(ie.jsx)(B.a,{variant:"contained",onClick:function(){N({}),N(I),U.current.handleClickOpen()},children:"\u521b\u5efa"}),Object(ie.jsxs)(M.a,{variant:"h6",className:a.title,children:["\u6444\u50cf\u5934: ",V.code?V.code:"--"," \u5206\u4eab\u5217\u8868"]}),Object(ie.jsx)(B.a,{variant:"contained",children:Object(ie.jsx)(i.b,{exact:!0,to:{pathname:"/",state:{}},children:"\u8fd4\u56de"})})]})}),Object(ie.jsx)(Ee,{row:I,type:"add",callBack:D,onRef:U}),Object(ie.jsx)(p.a,{className:a.container,children:Object(ie.jsxs)(b.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(ie.jsx)(f.a,{children:Object(ie.jsx)(x.a,{children:Ye.map((function(e){return Object(ie.jsx)(h.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ie.jsx)(m.a,{children:y.slice(c*v,c*v+v).map((function(e){return Object(ie.jsx)(x.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Ye.map((function(a){var t=e[a.id];return Object(ie.jsx)(h.a,{align:a.align,children:a.format?a.format(t,e,V,D):t},a.id)}))},e.id)}))})]})}),Object(ie.jsx)(O.a,{rowsPerPageOptions:[10,25,100],component:"div",count:y.length,rowsPerPage:v,page:c,onChangePage:function(e,a){o(a)},onChangeRowsPerPage:function(e){g(+e.target.value),o(0)}})]})}var He=t(248),Fe=t(238),Ae=t(239),We=t(246),ze=t(236),qe=t(240),Je=t(237),$e=t(121),_e=t.n($e);function Ke(){return Object(ie.jsxs)(M.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(ie.jsx)(ze.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var Ge=Object(u.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Qe(){var e=Ge(),a=r.a.useState({userName:"",password:""}),t=Object(s.a)(a,2),n=t[0],c=(t[1],r.a.useState(!1)),o=Object(s.a)(c,2),i=o[0],l=o[1],d=r.a.useState(""),u=Object(s.a)(d,2),b=u[0],m=u[1],h=function(e){n[e.target.id]=e.target.value};return r.a.useEffect((function(){"true"===window.localStorage.getItem("tokenExpired")&&localStorage.setItem("tokenExpired","false")}),[]),Object(ie.jsxs)(Je.a,{container:!0,component:"main",className:e.root,children:[Object(ie.jsx)(Fe.a,{}),Object(ie.jsx)(Je.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(ie.jsx)(Je.a,{item:!0,xs:12,sm:8,md:5,component:j.a,elevation:6,square:!0,children:Object(ie.jsxs)("div",{className:e.paper,children:[Object(ie.jsx)(He.a,{className:e.avatar,children:Object(ie.jsx)(_e.a,{})}),Object(ie.jsx)(M.a,{component:"h1",variant:"h5",children:"Sign in"}),i?Object(ie.jsxs)(je.a,{severity:"error",children:[Object(ie.jsx)(be.a,{children:"Error"}),b," ",Object(ie.jsx)("strong",{children:"check it out!"})]}):"",Object(ie.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(ie.jsx)(ue.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"userName",label:"UserName",name:"userName",autoComplete:"userName",autoFocus:!0,onChange:h}),Object(ie.jsx)(ue.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:h}),Object(ie.jsx)(Ae.a,{control:Object(ie.jsx)(We.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(ie.jsx)(B.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){_(n).then((function(e){if(1===e.code){var a=window.localStorage;return a.setItem("token",e.data.token),a.setItem("tokenExpired","false"),void(window.location.hash="#/")}m(e.msg),l(!0)}))},children:"Sign In"}),Object(ie.jsxs)(Je.a,{container:!0,children:[Object(ie.jsx)(Je.a,{item:!0,xs:!0,children:Object(ie.jsx)(ze.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(ie.jsx)(Je.a,{item:!0,children:Object(ie.jsx)(ze.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]}),Object(ie.jsx)(qe.a,{mt:5,children:Object(ie.jsx)(Ke,{})})]})]})})]})}var Xe=t(7),Ze=t(8),ea=t(21),aa=t(20),ta=function(e){Object(ea.a)(t,e);var a=Object(aa.a)(t);function t(){return Object(Xe.a)(this,t),a.apply(this,arguments)}return Object(Ze.a)(t,[{key:"render",value:function(){return Object(ie.jsx)("h2",{children:"404"})}}]),t}(r.a.Component),na=Object(u.a)((function(e){return{appBar:{position:"relative",backgroundColor:"#eebbaa"},title:{marginLeft:e.spacing(2),flex:1},videoContainer:{width:"90%",margin:"0 auto"}}}));function ra(e){var a=na(),t=r.a.useState(!0),n=Object(s.a)(t,2),c=n[0],o=n[1],i=null,l=0,d=function(e){var a=new RegExp("(^|&|\\?)"+e+"=([^&]*)(&|$)","i"),t=window.location.hash.substr(1).match(a);return null!=t?decodeURIComponent(t[2]):null},u=function(e){var a=d("method"),t=d("code"),n=d("authCode");if(a&&t&&n){var r={type:"flv"},o=$+"/live/"+a+"/"+t+"/"+n+".flv";r.url=o,r.hasAudio=c,r.isLive=!0,console.log("MediaDataSource",r),j(r)}},j=function(e){var a=document.getElementsByClassName("centeredVideo")[0];"undefined"!==typeof i&&null!=i&&(i.pause(),i.unload(),i.detachMediaElement(),i.destroy(),i=null),(i=H.a.createPlayer(e,{enableWorker:!1,lazyLoadMaxDuration:180,seekType:"range"})).on(H.a.Events.ERROR,(function(e,a,t){console.log("errorType:",e),console.log("errorDetail:",a),console.log("errorInfo:",t),i&&(i.pause(),i.unload(),i.detachMediaElement(),i.destroy(),i=null,window.setTimeout(u,500))})),i.on(H.a.Events.STATISTICS_INFO,(function(e){0!=l?l!=e.decodedFrames?l=e.decodedFrames:(console.log("decodedFrames:",e.decodedFrames),l=0,i&&(i.pause(),i.unload(),i.detachMediaElement(),i.destroy(),i=null,window.setTimeout(u,500))):l=e.decodedFrames})),i.attachMediaElement(a),i.load(),i.play()};return Object(ie.jsx)("div",{children:Object(ie.jsxs)("div",{children:[Object(ie.jsx)(L.a,{className:a.appBar,children:Object(ie.jsxs)(E.a,{children:[Object(ie.jsx)(B.a,{variant:"contained",onClick:u,children:"play"}),Object(ie.jsxs)(M.a,{variant:"h6",className:a.title,children:["hasAudio",Object(ie.jsx)(V.a,{checked:c,id:"Audio",color:"primary",name:"hasAudio",onChange:function(e){o(e.target.checked)},inputProps:{"aria-label":"primary checkbox"}})]})]})}),Object(ie.jsx)("div",{className:a.videoContainer,children:Object(ie.jsx)("div",{children:Object(ie.jsx)("video",{name:"videoElement",className:"centeredVideo",controls:!0,allow:"autoPlay",width:"100%",children:"Your browser is too old which doesn't support HTML5 video."})})})]})})}function ca(e){return Object(ie.jsxs)(l.c,{children:[Object(ie.jsx)(l.a,{exact:!0,path:"/",component:ge}),Object(ie.jsx)(l.a,{exact:!0,path:"/camerashare",component:Ue}),Object(ie.jsx)(l.a,{exact:!0,path:"/live",component:ra}),Object(ie.jsx)(l.a,{path:"/login",component:Qe}),Object(ie.jsx)(l.a,{component:ta})]})}var oa=Object(n.memo)(ca);var ia=function(){return Object(ie.jsx)("div",{children:Object(ie.jsx)(i.a,{children:Object(ie.jsx)(oa,{})})})};function la(){return Object(ie.jsx)(ia,{})}o.a.render(Object(ie.jsx)(la,{}),document.querySelector("#app"))}},[[173,1,2]]]);
//# sourceMappingURL=main.82132c58.chunk.js.map
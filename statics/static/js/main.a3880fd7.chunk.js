(this.webpackJsonprtsp2rtmpweb=this.webpackJsonprtsp2rtmpweb||[]).push([[0],{136:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(10),r=a.n(i),o=a(92),l=a(17),s=a(175),d=a(137),j=a(192),u=a(196),b=a(195),p=a(191),h=a(193),f=a(200),O=a(194),x=a(90),m=a.n(x),v=a(89),g=a.n(v),C=a(45),w=a.n(C),k=a(188),y=a(187),R=a(189),L=a(190),P=a(88),S=a.n(P),B=a(64),N=a(182),U=a(202),T=a(180),V=a(181),D=a(48),E=a(62),I=a.n(E),H=a(178),M=a(91),W={serverURL:window.location.origin},z=a(4),A=Object(s.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},videoContainer:{width:"90%",margin:"0 auto"}}})),F=c.a.forwardRef((function(e,t){return Object(z.jsx)(H.a,Object(B.a)({direction:"up",ref:t},e))}));function J(e){var t=A(),a=c.a.useState(!1),i=Object(l.a)(a,2),r=i[0],o=i[1],s=null;Object(n.useImperativeHandle)(e.onRef,(function(){return{handleClickOpen:d}}));var d=function(){o(!0)},j=function(){o(!1)},u=function(e){var t=document.getElementsByClassName("centeredVideo")[0];"undefined"!==typeof s&&null!=s&&(s.unload(),s.detachMediaElement(),s.destroy(),s=null),(s=M.a.createPlayer(e,{enableWorker:!1,lazyLoadMaxDuration:180,seekType:"range"})).attachMediaElement(t),s.load(),s.play()};return Object(z.jsx)("div",{children:Object(z.jsxs)(U.a,{fullScreen:!0,open:r,onClose:j,TransitionComponent:F,children:[Object(z.jsx)(T.a,{className:t.appBar,children:Object(z.jsxs)(V.a,{children:[Object(z.jsx)(N.a,{variant:"contained",onClick:function(t){var a={type:"flv"},n=W.serverURL+"/live/"+e.row.code+"/"+e.row.authCodePermanent+".flv";a.url=n,a.hasAudio=!1,a.isLive=!0,console.log("MediaDataSource",a),u(a)},children:"play"}),Object(z.jsx)(D.a,{variant:"h6",className:t.title}),Object(z.jsx)(N.a,{autoFocus:!0,color:"inherit",onClick:j,children:Object(z.jsx)(I.a,{})})]})}),Object(z.jsx)("div",{className:t.videoContainer,children:Object(z.jsx)("div",{children:Object(z.jsx)("video",{name:"videoElement",className:"centeredVideo",controls:!0,allow:"autoPlay",width:"100%",children:"Your browser is too old which doesn't support HTML5 video."})})})]})})}var q=a(201),Y=a(198),G=a(184),K=Object(s.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},formClass:{"& > *":{margin:e.spacing(1),width:"25ch"}},formDiv:{margin:"0 auto"}}})),Q=c.a.forwardRef((function(e,t){return Object(z.jsx)(H.a,Object(B.a)({direction:"up",ref:t},e))}));function X(e){var t=K(),a=c.a.useState(!1),i=Object(l.a)(a,2),r=i[0],o=i[1],s=c.a.useState(e.row),d=Object(l.a)(s,2),j=d[0],u=(d[1],c.a.useState(!1)),b=Object(l.a)(u,2),p=b[0],h=b[1],f=c.a.useState(""),O=Object(l.a)(f,2),x=O[0],m=O[1];Object(n.useImperativeHandle)(e.onRef,(function(){return{handleClickOpen:v}}));var v=function(){o(!0)},g=function(){o(!1)},C=function(t){w.a.post("".concat(W.serverURL,"/camera/edit"),j).then((function(t){if(1===t.data.code)return o(!1),void(e.callBack&&e.callBack());m(t.data.msg),h(!0),window.setTimeout((function(){h(!1)}),5e3)}))},k=function(e){console.log(e.target.value),j[e.target.id]=e.target.value};return Object(z.jsx)("div",{children:Object(z.jsxs)(U.a,{fullScreen:!0,open:r,onClose:g,TransitionComponent:Q,children:[Object(z.jsx)(T.a,{className:t.appBar,children:Object(z.jsxs)(V.a,{children:[Object(z.jsx)(N.a,{variant:"contained",onClick:C,children:"save"}),Object(z.jsx)("span",{children:"\xa0\xa0"}),"edit"===e.type?Object(z.jsx)(N.a,{variant:"contained",onClick:function(t){w.a.post("".concat(W.serverURL,"/camera/delete"),j).then((function(t){if(1===t.data.code)return o(!1),void(e.callBack&&e.callBack());m(t.data.msg),h(!0),window.setTimeout((function(){h(!1)}),5e3)}))},children:"delete"}):"",Object(z.jsx)(D.a,{variant:"h6",className:t.title}),Object(z.jsx)(N.a,{autoFocus:!0,color:"inherit",onClick:g,children:Object(z.jsx)(I.a,{})})]})}),p?Object(z.jsxs)(Y.a,{severity:"error",children:[Object(z.jsx)(G.a,{children:"Error"}),x," ",Object(z.jsx)("strong",{children:"check it out!"})]}):"",Object(z.jsx)("div",{className:t.formDiv,children:Object(z.jsxs)("form",{className:t.formClass,noValidate:!0,autoComplete:"off",onSubmit:C,children:["edit"===e.type?Object(z.jsx)("div",{children:Object(z.jsx)(q.a,{id:"id",label:"id",InputProps:{readOnly:!0},defaultValue:j.id})}):"",Object(z.jsx)("div",{children:Object(z.jsx)(q.a,{id:"code",label:"code",defaultValue:j.code,onChange:k})}),Object(z.jsx)("div",{children:Object(z.jsx)(q.a,{id:"rtspURL",label:"rtspURL",defaultValue:j.rtspURL,onChange:k})}),Object(z.jsx)("div",{children:Object(z.jsx)(q.a,{id:"rtmpURL",label:"rtmpURL",defaultValue:j.rtmpURL,onChange:k})}),Object(z.jsx)("div",{children:Object(z.jsx)(q.a,{id:"authCodeTemp",label:"authCodeTemp",defaultValue:j.authCodeTemp,onChange:k})}),Object(z.jsx)("div",{children:Object(z.jsx)(q.a,{id:"authCodePermanent",label:"authCodePermanent",defaultValue:j.authCodePermanent,onChange:k})})]})})]})})}var Z=Object(s.a)((function(){return{root:{position:"relative"},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:999,border:"0px solid",padding:1,backgroundColor:"#f8f8f8"}}}));function $(e){var t=Z(),a=c.a.useState(!1),n=Object(l.a)(a,2),i=n[0],r=n[1],o=c.a.createRef();var s=c.a.createRef();return Object(z.jsx)(k.a,{onClickAway:function(){r(!1)},children:Object(z.jsxs)("div",{className:t.root,children:[Object(z.jsx)("button",{type:"button",onClick:function(){r((function(e){return!e}))},children:Object(z.jsx)(S.a,{})}),i?Object(z.jsx)("div",{className:t.dropdown,children:Object(z.jsxs)(y.a,{component:"nav","aria-label":"secondary mailbox folders",children:[Object(z.jsx)(R.a,{button:!0,children:Object(z.jsx)(L.a,{primary:"edit",onClick:function(){r(!1),s.current.handleClickOpen()}})}),Object(z.jsx)(R.a,{button:!0,onClick:function(){r(!1),o.current.handleClickOpen()},children:Object(z.jsx)(L.a,{primary:"play"})})]})}):null,Object(z.jsx)(J,{row:e.row,onRef:o}),Object(z.jsx)(X,{row:e.row,type:"edit",callBack:e.callBack,onRef:s})]})})}var _=[{id:"id",label:"id",minWidth:170},{id:"code",label:"code",minWidth:100},{id:"rtspURL",label:"rtspURL"},{id:"rtmpURL",label:"rtmpURL"},{id:"authCodeTemp",label:"authCodeTemp"},{id:"authCodePermanent",label:"authCodePermanent"},{id:"onlineStatus",label:"onlineStatus",format:function(e){return e&&1===e?Object(z.jsx)(g.a,{}):Object(z.jsx)(m.a,{})}},{id:"action",label:"action",format:function(e,t,a){return Object(z.jsx)($,{row:t,callBack:a})}}],ee=Object(s.a)((function(e){return{root:{width:"100%",position:"relative"},container:{minHeight:400},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:0,border:"0px solid",padding:1,backgroundColor:"#f8f8f8"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}}));function te(){var e,t,a=ee(),n=c.a.useState(0),i=Object(l.a)(n,2),r=i[0],s=i[1],x=c.a.useState(10),m=Object(l.a)(x,2),v=m[0],g=m[1],C=c.a.useState([]),k=Object(l.a)(C,2);e=k[0],t=k[1];var y=function(){w.a.get("".concat(W.serverURL,"/camera/all")).then((function(a){var n;e.splice(0),(n=e).push.apply(n,Object(o.a)(a.data.data.page)),t([]),t(e)}))},R=c.a.createRef();return c.a.useEffect(y,[]),Object(z.jsxs)(d.a,{className:a.root,children:[Object(z.jsx)(T.a,{className:a.appBar,children:Object(z.jsxs)(V.a,{children:[Object(z.jsx)(N.a,{variant:"contained",onClick:function(){R.current.handleClickOpen()},children:"ADD"}),Object(z.jsx)(D.a,{variant:"h6",className:a.title})]})}),Object(z.jsx)(X,{row:{},type:"add",callBack:y,onRef:R}),Object(z.jsx)(p.a,{className:a.container,children:Object(z.jsxs)(j.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(z.jsx)(h.a,{children:Object(z.jsx)(O.a,{children:_.map((function(e){return Object(z.jsx)(b.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(z.jsx)(u.a,{children:e.slice(r*v,r*v+v).map((function(e){return Object(z.jsx)(O.a,{hover:!0,role:"checkbox",tabIndex:-1,children:_.map((function(t){var a=e[t.id];return Object(z.jsx)(b.a,{align:t.align,children:t.format?t.format(a,e,y):a},t.id)}))},e.code)}))})]})}),Object(z.jsx)(f.a,{rowsPerPageOptions:[10,25,100],component:"div",count:e.length,rowsPerPage:v,page:r,onChangePage:function(e,t){s(t)},onChangeRowsPerPage:function(e){g(+e.target.value),s(0)}})]})}function ae(){return Object(z.jsx)(te,{})}r.a.render(Object(z.jsx)(ae,{}),document.querySelector("#app"))}},[[136,1,2]]]);
//# sourceMappingURL=main.a3880fd7.chunk.js.map
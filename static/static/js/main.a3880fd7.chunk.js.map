{"version":3,"sources":["conf/env.js","camera/play.js","camera/cameraEdit.js","camera/actionList.js","camera/cameraList.js","index.js"],"names":["serverURL","window","location","origin","useStyles","makeStyles","theme","appBar","position","title","marginLeft","spacing","flex","videoContainer","width","margin","Transition","React","forwardRef","props","ref","Slide","direction","Play","classes","useState","open","setOpen","player","useImperativeHandle","onRef","handleClickOpen","handleClose","flv_load_mds","mediaDataSource","element","document","getElementsByClassName","unload","detachMediaElement","destroy","Flv","createPlayer","enableWorker","lazyLoadMaxDuration","seekType","attachMediaElement","load","play","Dialog","fullScreen","onClose","TransitionComponent","AppBar","className","Toolbar","Button","variant","onClick","val","type","videoUrl","Env","row","code","authCodePermanent","console","log","Typography","autoFocus","color","name","controls","allow","formClass","formDiv","alertShow","setAlertShow","alertText","setAlertText","save","data","axios","post","then","res","callBack","msg","setTimeout","formChange","event","target","value","id","Alert","severity","AlertTitle","noValidate","autoComplete","onSubmit","TextField","label","InputProps","readOnly","defaultValue","onChange","rtspURL","rtmpURL","authCodeTemp","root","dropdown","top","right","left","zIndex","border","padding","backgroundColor","ActionList","playRef","createRef","editRef","ClickAwayListener","onClickAway","prev","List","component","aria-label","ListItem","button","ListItemText","primary","current","columns","minWidth","format","container","minHeight","CameraList","rows","setRows","page","setPage","rowsPerPage","setRowsPerPage","getPageList","get","splice","push","useEffect","Paper","TableContainer","Table","stickyHeader","TableHead","TableRow","map","column","TableCell","align","style","TableBody","slice","hover","role","tabIndex","TablePagination","rowsPerPageOptions","count","length","onChangePage","newPage","onChangeRowsPerPage","App","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.a3880fd7.chunk.js","sourcesContent":["const serverURL = window.location.origin\r\n// const serverURL = \"http://127.0.0.1:8080\"\r\nexport default {serverURL:serverURL}","import React, { useImperativeHandle } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Flv from 'flv.js';\r\nimport Env from '../conf/env';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  videoContainer: {\r\n    width: '90%',\r\n    margin: '0 auto'\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Play(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  var player = null;\r\n\r\n  //用useImperativeHandle暴露一些外部ref能访问的属性\r\n  useImperativeHandle(props.onRef, () => {\r\n    return {\r\n      handleClickOpen: handleClickOpen,\r\n    };\r\n  });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const flv_load = (val) => {\r\n      var mediaDataSource = {\r\n          type: 'flv'\r\n      };\r\n      let videoUrl = Env.serverURL+\"/live/\"+props.row.code+\"/\"+props.row.authCodePermanent+\".flv\";\r\n      mediaDataSource['url'] = videoUrl;\r\n      mediaDataSource['hasAudio'] = false;\r\n      mediaDataSource['isLive'] = true;\r\n      console.log('MediaDataSource', mediaDataSource);\r\n      flv_load_mds(mediaDataSource);\r\n  }\r\n\r\n  const flv_load_mds = (mediaDataSource) => {\r\n      var element = document.getElementsByClassName('centeredVideo')[0];\r\n    \r\n      if (typeof player !== \"undefined\") {\r\n          if (player != null) {\r\n              player.unload();\r\n              player.detachMediaElement();\r\n              player.destroy();\r\n              player = null;\r\n          }\r\n      }\r\n      \r\n      player = Flv.createPlayer(mediaDataSource, {\r\n          enableWorker: false,\r\n          lazyLoadMaxDuration: 3 * 60,\r\n          seekType: 'range',\r\n      });\r\n      player.attachMediaElement(element);\r\n      player.load();\r\n      player.play()\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Button variant=\"contained\" onClick={flv_load}>\r\n              play\r\n            </Button>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              \r\n            </Typography>\r\n            <Button autoFocus color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon />\r\n            </Button>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <div className={classes.videoContainer}>\r\n            <div>\r\n                <video name=\"videoElement\" className=\"centeredVideo\" controls allow=\"autoPlay\" width=\"100%\" >\r\n                    Your browser is too old which doesn't support HTML5 video.\r\n                </video>\r\n            </div>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useImperativeHandle } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport axios from 'axios';  \r\nimport { Alert, AlertTitle } from '@material-ui/lab';\r\nimport Env from '../conf/env';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  formClass: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n      width: '25ch',\r\n    },\r\n  },\r\n  formDiv: {\r\n    margin: '0 auto',\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Play(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [row, setRow] = React.useState(props.row);\r\n  const [alertShow, setAlertShow] = React.useState(false);\r\n  const [alertText, setAlertText] = React.useState(\"\");\r\n\r\n  //用useImperativeHandle暴露一些外部ref能访问的属性\r\n  useImperativeHandle(props.onRef, () => {\r\n    return {\r\n      handleClickOpen: handleClickOpen,\r\n    };\r\n  });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const save = (data) => {\r\n    axios.post(`${Env.serverURL}/camera/edit`,row)\r\n    .then(res => {\r\n      if (res.data.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n      setAlertText(res.data.msg);\r\n      setAlertShow(true);\r\n      window.setTimeout(function (){\r\n        setAlertShow(false);\r\n      },5000)\r\n    });\r\n  };\r\n\r\n  const deleteCamera = (data) => {\r\n    axios.post(`${Env.serverURL}/camera/delete`,row)\r\n    .then(res => {\r\n      if (res.data.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n      setAlertText(res.data.msg);\r\n      setAlertShow(true);\r\n      window.setTimeout(function (){\r\n        setAlertShow(false);\r\n      },5000)\r\n    });\r\n  };\r\n\r\n  const formChange = (event) => {\r\n    console.log(event.target.value)\r\n    row[event.target.id] = event.target.value\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Button variant=\"contained\" onClick={save}>\r\n              save\r\n            </Button>\r\n            <span>&nbsp;&nbsp;</span>\r\n            {props.type === 'edit'?\r\n              <Button variant=\"contained\" onClick={deleteCamera}>\r\n                delete\r\n              </Button>:\"\"\r\n            }       \r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              \r\n            </Typography>\r\n            <Button autoFocus color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon />\r\n            </Button>\r\n          </Toolbar>\r\n        </AppBar>{\r\n          alertShow?\r\n          <Alert severity=\"error\">\r\n            <AlertTitle>Error</AlertTitle>\r\n            {alertText} <strong>check it out!</strong>\r\n          </Alert>:\"\"\r\n        }\r\n        \r\n        <div className={classes.formDiv}>\r\n          <form className={classes.formClass} noValidate autoComplete=\"off\" onSubmit={save}>\r\n            {props.type === 'edit'?<div>\r\n            <TextField \r\n              id=\"id\"\r\n              label=\"id\" \r\n              InputProps={{\r\n                readOnly: true,\r\n              }} \r\n              defaultValue={row.id}\r\n            />\r\n            </div>:\"\"}\r\n            \r\n            <div>\r\n              <TextField \r\n                id=\"code\" \r\n                label=\"code\" \r\n                defaultValue={row.code}\r\n                onChange={formChange}\r\n              />\r\n            </div>\r\n            <div>\r\n              <TextField \r\n                id=\"rtspURL\" \r\n                label=\"rtspURL\" \r\n                defaultValue={row.rtspURL}\r\n                onChange={formChange}\r\n              />\r\n            </div>\r\n            <div>\r\n            <TextField \r\n              id=\"rtmpURL\"\r\n              label=\"rtmpURL\" \r\n              defaultValue={row.rtmpURL}\r\n              onChange={formChange}\r\n            />\r\n            </div>\r\n            <div>\r\n              <TextField \r\n                id=\"authCodeTemp\" \r\n                label=\"authCodeTemp\" \r\n                defaultValue={row.authCodeTemp}\r\n                onChange={formChange}\r\n              />\r\n            </div>\r\n            <div>\r\n              <TextField \r\n                id=\"authCodePermanent\" \r\n                label=\"authCodePermanent\" \r\n                defaultValue={row.authCodePermanent}\r\n                onChange={formChange}\r\n              />\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListIcon from '@material-ui/icons/List';\r\nimport Play from './play';\r\nimport CameraEdit from './cameraEdit';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    position: 'relative',\r\n  },\r\n  dropdown: {\r\n    position: 'absolute',\r\n    top: 28,\r\n    right: 0,\r\n    left: 0,\r\n    zIndex: 999,\r\n    border: '0px solid',\r\n    padding: 1,\r\n    backgroundColor: '#f8f8f8',\r\n  },\r\n}));\r\n\r\nexport default function ActionList(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClick = () => {\r\n    setOpen((prev) => !prev);\r\n  };\r\n\r\n  const handleClickAway = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  let playRef = React.createRef();\r\n  function play() {\r\n    setOpen(false);\r\n    playRef.current.handleClickOpen();\r\n  }\r\n\r\n  let editRef = React.createRef();\r\n  function edit() {\r\n    setOpen(false);\r\n    editRef.current.handleClickOpen();\r\n  }\r\n\r\n  return (\r\n    <ClickAwayListener onClickAway={handleClickAway}>\r\n      <div className={classes.root}>\r\n        <button type=\"button\" onClick={handleClick}>\r\n          <ListIcon />\r\n        </button>\r\n        {open ? (\r\n          <div className={classes.dropdown}>\r\n            <List component=\"nav\" aria-label=\"secondary mailbox folders\">\r\n              <ListItem button>\r\n                <ListItemText primary=\"edit\" onClick={edit}/>\r\n              </ListItem>\r\n              <ListItem button onClick={play}>\r\n                <ListItemText primary=\"play\" />\r\n              </ListItem>\r\n            </List>\r\n          </div>\r\n        ) : null}\r\n        <Play row={props.row} onRef={playRef}/>\r\n        <CameraEdit row={props.row} type=\"edit\"  callBack={props.callBack} onRef={editRef}/>\r\n      </div>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport LinkOffIcon from '@material-ui/icons/LinkOff';\r\nimport LinkIcon from '@material-ui/icons/Link';\r\nimport axios from 'axios'; \r\nimport ActionList from './actionList';\r\nimport CameraEdit from './cameraEdit';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Env from '../conf/env';\r\n\r\nconst columns = [\r\n  { id: 'id', label: 'id', minWidth: 170 },\r\n  { id: 'code', label: 'code', minWidth: 100 },\r\n  {\r\n    id: 'rtspURL',\r\n    label: 'rtspURL',\r\n  },\r\n  {\r\n    id: 'rtmpURL',\r\n    label: 'rtmpURL',\r\n  },\r\n  {\r\n    id: 'authCodeTemp',\r\n    label: 'authCodeTemp',\r\n  },\r\n  {\r\n    id: 'authCodePermanent',\r\n    label: 'authCodePermanent',\r\n  },\r\n  {\r\n    id: 'onlineStatus',\r\n    label: 'onlineStatus',\r\n    format: (value) => value && value === 1?<LinkIcon/>:<LinkOffIcon/>,\r\n  },\r\n  {\r\n    id: 'action',\r\n    label: 'action',\r\n    format: (value,row,callBack) => {return <ActionList row={row} callBack={callBack} />},\r\n  },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    position: 'relative',\r\n  },\r\n  container: {\r\n    minHeight: 400,\r\n  },\r\n  dropdown: {\r\n    position: 'absolute',\r\n    top: 28,\r\n    right: 0,\r\n    left: 0,\r\n    zIndex: 0,\r\n    border: '0px solid',\r\n    padding: 1,\r\n    backgroundColor: '#f8f8f8',\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nexport default function CameraList() {\r\n  const classes = useStyles();\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\r\n  var rows,setRows;\r\n  [rows, setRows] = React.useState([]);\r\n  var obj = {}\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(+event.target.value);\r\n    setPage(0);\r\n  };\r\n\r\n  const getPageList = ()=>{\r\n    axios.get(`${Env.serverURL}/camera/all`)\r\n    .then(res => {\r\n      rows.splice(0);\r\n      rows.push(...res.data.data.page)\r\n      setRows([])\r\n      setRows(rows)\r\n    });\r\n  }\r\n\r\n  let editRef = React.createRef();\r\n  function edit() {\r\n    editRef.current.handleClickOpen();\r\n  }\r\n\r\n  React.useEffect(getPageList,[]) \r\n\r\n  return (\r\n    \r\n    <Paper className={classes.root}>\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar>\r\n          <Button variant=\"contained\" onClick={edit}>\r\n            ADD\r\n          </Button>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            \r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <CameraEdit row={obj} type=\"add\" callBack={getPageList} onRef={editRef}/>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  align={column.align}\r\n                  style={{ minWidth: column.minWidth }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n              return (\r\n                <TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n                  {columns.map((column) => {\r\n                    const value = row[column.id];\r\n                    return (\r\n                      <TableCell key={column.id} align={column.align}>\r\n                        {column.format ? column.format(value,row,getPageList) : value}\r\n                      </TableCell>\r\n                    );\r\n                  })}\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[10, 25, 100]}\r\n        component=\"div\"\r\n        count={rows.length}\r\n        rowsPerPage={rowsPerPage}\r\n        page={page}\r\n        onChangePage={handleChangePage}\r\n        onChangeRowsPerPage={handleChangeRowsPerPage}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CameraList from './camera/cameraList';\n\nfunction App() {\n  return (\n    <CameraList />\n  );\n}\n\nReactDOM.render(<App />, document.querySelector('#app'));"],"sourceRoot":""}
{"version":3,"sources":["camera/CopyAlert.js","conf/env.js","api/AxiosConf.js","api/Api.js","camera/Play.js","camera/CameraEdit.js","camera/ActionList.js","camera/CameraList.js","404/NoMatch.js","camera/Live.js","route/Routing.js","Rtsp2rtmp.js","index.js"],"names":["useStyles","makeStyles","theme","root","width","CopyAlert","props","classes","React","useState","open","setOpen","dialog","title","content","useImperativeHandle","onRef","handleClickOpen","handleClose","className","Dialog","onClose","aria-labelledby","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","onClick","color","serverURL","window","location","origin","axios","defaults","withCredentials","timeout","interceptors","request","use","config","token","localStorage","getItem","headers","err","console","error","Promise","reject","response","data","errcode","parseInt","hash","isCancel","log","status","setItem","alert","String","toLowerCase","substring","Env","POST","url","params","post","then","res","get","API","appBar","position","backgroundColor","marginLeft","spacing","flex","videoContainer","margin","Transition","forwardRef","ref","Slide","direction","Play","audio","setAudio","player","lastDecodedFrame","flv_load","val","mediaDataSource","type","videoUrl","row","code","authCode","flv_load_mds","element","document","getElementsByClassName","pause","unload","detachMediaElement","destroy","Flv","createPlayer","enableWorker","lazyLoadMaxDuration","seekType","on","Events","ERROR","errorType","errorDetail","errorInfo","setTimeout","STATISTICS_INFO","decodedFrames","attachMediaElement","load","play","fullScreen","TransitionComponent","AppBar","Toolbar","variant","Typography","Switch","checked","name","onChange","event","target","inputProps","autoFocus","controls","allow","formClass","formDiv","enabled","setEnabled","rtspURL","rtmpURL","onlineStatus","alertShow","setAlertShow","alertText","setAlertText","save","callBack","msg","formChange","value","Alert","severity","AlertTitle","noValidate","autoComplete","onSubmit","TextField","label","InputProps","readOnly","defaultValue","dropdown","top","right","left","zIndex","border","padding","ActionList","dialogObj","playRef","createRef","editRef","copyRef","ClickAwayListener","onClickAway","prev","List","component","aria-label","ListItem","button","ListItemText","primary","current","sURL","pathname","Copy","columns","minWidth","format","container","minHeight","CameraList","rows","setRows","page","setPage","rowsPerPage","setRowsPerPage","getPageList","splice","push","useEffect","Paper","TableContainer","Table","stickyHeader","TableHead","TableRow","map","column","TableCell","align","style","TableBody","slice","hover","role","tabIndex","TablePagination","rowsPerPageOptions","count","length","onChangePage","newPage","onChangeRowsPerPage","Component","getQueryString","reg","RegExp","r","substr","match","decodeURIComponent","method","Routing","exact","path","Live","NoMatch","memo","Rtmp2flv","App","Rtsp2rtmp","ReactDOM","render","querySelector"],"mappings":"qbASMA,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJC,MAAO,YAII,SAASC,EAAUC,GAChC,IAAMC,EAAUP,IAChB,EAAwBQ,IAAMC,UAAS,GAAvC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAA0BH,IAAMC,SAASH,EAAMM,OAAOC,OAAtD,mBAAOA,EAAP,KACA,GADA,KAC8BL,IAAMC,SAASH,EAAMM,OAAOE,UAA1D,mBAAOA,EAAP,UAGAC,8BAAoBT,EAAMU,OAAO,WAC/B,MAAO,CACLC,gBAAiBA,MAIrB,IAAMA,EAAkB,WACtBN,GAAQ,IAGJO,EAAc,WAClBP,GAAQ,IAGV,OACE,qBAAKQ,UAAWZ,EAAQJ,KAAxB,SACE,eAACiB,EAAA,EAAD,CAAQV,KAAMA,EAAMW,QAASH,EAAaI,kBAAgB,oBAA1D,UACE,cAACC,EAAA,EAAD,CAAaC,GAAG,oBAAhB,SAAqCX,IACrC,cAACY,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,UACGZ,MAGL,cAACa,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAQC,QAASX,EAAaY,MAAM,UAApC,uB,iFCrCK,GAACC,UAHAC,OAAOC,SAASC,Q,iBCFhCC,IAAMC,SAASC,iBAAkB,EAEjCF,IAAMC,SAASE,QAAU,IAEzBH,IAAMI,aAAaC,QAAQC,KAAI,SAAAC,GAC7B,IAAIC,EAAQX,OAAOY,aAAaC,QAAQ,SAExC,OADAH,EAAOI,QAAQH,MAAQA,EAChBD,KACN,SAAAK,GAED,OADAC,QAAQC,MAAMF,GACPG,QAAQC,OAAOJ,MAGxBZ,IAAMI,aAAaa,SAASX,KAAI,SAAUW,GAOxC,OANIA,EAASC,MAAQD,EAASC,KAAKC,SACO,MAApCC,SAASH,EAASC,KAAKC,WAEzBtB,OAAOC,SAASuB,KAAO,WAGpBJ,KACN,SAAUH,GACX,OAAId,IAAMsB,aAGJR,EAAMG,UACRJ,QAAQU,IAA8B,MAA1BT,EAAMG,SAASO,QACG,MAA1BV,EAAMG,SAASO,OACZ3B,OAAOY,aAAaC,QAAQ,UAAab,OAAOY,aAAaC,QAAQ,iBAAmE,UAAhDb,OAAOY,aAAaC,QAAQ,kBACvHb,OAAOY,aAAagB,QAAQ,eAAgB,QAC5C5B,OAAOC,SAASuB,KAAO,WAEU,MAA1BP,EAAMG,SAASO,QACxBE,MAAM,uBAECZ,GAA0D,mBAAjDa,OAAOb,GAAOc,cAAcC,UAAU,EAAG,IAC3DH,MAAM,oBAENA,MAAM,mBAfDX,QAAQC,OAAOF,MAqB1B,IAAIlB,EAAYkC,EAAIlC,UAEPmC,GAAO,SAACC,EAAKC,GACxB,OAAOjC,IAAMkC,KAAN,UAActC,GAAd,OAA0BoC,GAAOC,GAAQE,MAAK,SAAAC,GAAG,OAAIA,EAAIlB,SC/ClD,GACL,GAAD,OAFOY,EAAIlC,WACL,GAKA,SAACqC,GACT,OD2CW,SAACD,EAAKC,GACvB,OAAOjC,IAAMqC,IAAN,UAAazC,GAAb,OAAyBoC,GAAO,CACrCC,OAAQA,IACPE,MAAK,SAAAC,GAAG,OAAIA,EAAIlB,QC9CNoB,CAAA,eAAuBL,IANtB,GAQA,SAACA,GACT,OAAOK,GAAA,eAAwBL,IATvB,GAWE,SAACA,GACX,OAAOK,GAAA,iBAA0BL,IAZzB,GAcG,SAACA,GACZ,OAAOK,GAAA,kBAA2BL,ICNpCpE,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCwE,OAAQ,CACNC,SAAU,WACVC,gBAAiB,WAEnB/D,MAAO,CACLgE,WAAY3E,EAAM4E,QAAQ,GAC1BC,KAAM,GAERC,eAAgB,CACd5E,MAAO,MACP6E,OAAQ,cAINC,GAAa1E,IAAM2E,YAAW,SAAoB7E,EAAO8E,GAC7D,OAAO,cAACC,EAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAAS9E,OAG9B,SAASiF,GAAKjF,GAC3B,IAAMC,EAAUP,KAChB,EAAwBQ,IAAMC,UAAS,GAAvC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAA0BH,IAAMC,UAAS,GAAzC,mBAAO+E,EAAP,KAAcC,EAAd,KACIC,EAAS,KACTC,EAAmB,EAOvB5E,8BAAoBT,EAAMU,OAAO,WAC/B,MAAO,CACLC,gBAAiBA,MAIrB,IAAMA,EAAkB,WACtBN,GAAQ,IAGJO,EAAc,WAClBP,GAAQ,IAGJiF,EAAW,SAACC,GACd,IAAIC,EAAkB,CAClBC,KAAM,OAENC,EAAWvB,GAAW,mBAAmBnE,EAAM2F,IAAIC,KAAK,IAAI5F,EAAM2F,IAAIE,SAAS,OACnFL,EAAe,IAAUE,EACzBF,EAAe,SAAeN,EAC9BM,EAAe,QAAa,EAC5B9C,QAAQU,IAAI,kBAAmBoC,GAC/BM,EAAaN,IAGXM,EAAe,SAACN,GAClB,IAAIO,EAAUC,SAASC,uBAAuB,iBAAiB,GAEzC,qBAAXb,GACO,MAAVA,IACFA,EAAOc,QACPd,EAAOe,SACPf,EAAOgB,qBACPhB,EAAOiB,UACPjB,EAAQ,OAIdA,EAASkB,IAAIC,aAAaf,EAAiB,CACvCgB,cAAc,EACdC,oBAAqB,IACrBC,SAAU,WAEPC,GAAGL,IAAIM,OAAOC,OAAO,SAACC,EAAWC,EAAaC,GACnDtE,QAAQU,IAAI,aAAc0D,GAC1BpE,QAAQU,IAAI,eAAgB2D,GAC5BrE,QAAQU,IAAI,aAAc4D,GAEtB5B,IACFA,EAAOc,QACPd,EAAOe,SACPf,EAAOgB,qBACPhB,EAAOiB,UACPjB,EAAQ,KACR1D,OAAOuF,WAAW3B,EAAS,SAI/BF,EAAOuB,GAAGL,IAAIM,OAAOM,iBAAiB,SAAUjD,GACtB,GAApBoB,EAIAA,GAAoBpB,EAAIkD,cAC1B9B,EAAmBpB,EAAIkD,eAErBzE,QAAQU,IAAI,iBAAkBa,EAAIkD,eAClC9B,EAAmB,EACfD,IACFA,EAAOc,QACPd,EAAOe,SACPf,EAAOgB,qBACPhB,EAAOiB,UACPjB,EAAQ,KACR1D,OAAOuF,WAAW3B,EAAS,OAd/BD,EAAmBpB,EAAIkD,iBAkB3B/B,EAAOgC,mBAAmBrB,GAC1BX,EAAOiC,OACPjC,EAAOkC,QAGX,OACE,8BACE,eAACxG,EAAA,EAAD,CAAQyG,YAAU,EAACnH,KAAMA,EAAMW,QAASH,EAAa4G,oBAAqB5C,GAA1E,UACE,cAAC6C,EAAA,EAAD,CAAQ5G,UAAWZ,EAAQmE,OAA3B,SACE,eAACsD,EAAA,EAAD,WACE,cAACpG,EAAA,EAAD,CAAQqG,QAAQ,YAAYpG,QAAS+D,EAArC,kBAGA,eAACsC,EAAA,EAAD,CAAYD,QAAQ,KAAK9G,UAAWZ,EAAQM,MAA5C,qBAEE,cAACsH,EAAA,EAAD,CACEC,QAAS5C,EACThE,GAAG,QACHM,MAAM,UACNuG,KAAK,WACLC,SAxGO,SAACC,GACpB9C,EAAS8C,EAAMC,OAAOJ,UAwGVK,WAAY,CAAE,aAAc,yBAGhC,cAAC7G,EAAA,EAAD,CAAQ8G,WAAS,EAAC5G,MAAM,UAAUD,QAASX,EAA3C,SACE,cAAC,IAAD,WAIN,qBAAKC,UAAWZ,EAAQyE,eAAxB,SACI,8BACI,uBAAOqD,KAAK,eAAelH,UAAU,gBAAgBwH,UAAQ,EAACC,MAAM,WAAWxI,MAAM,OAArF,iF,kCC5IVJ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCwE,OAAQ,CACNC,SAAU,YAEZ9D,MAAO,CACLgE,WAAY3E,EAAM4E,QAAQ,GAC1BC,KAAM,GAER8D,UAAW,CACT,QAAS,CACP5D,OAAQ/E,EAAM4E,QAAQ,GACtB1E,MAAO,SAGX0I,QAAS,CACP7D,OAAQ,cAINC,GAAa1E,IAAM2E,YAAW,SAAoB7E,EAAO8E,GAC7D,OAAO,cAACC,EAAA,EAAD,aAAOC,UAAU,KAAKF,IAAKA,GAAS9E,OAG9B,SAASiF,GAAKjF,GAC3B,IAAMC,EAAUP,KAChB,EAAwBQ,IAAMC,UAAS,GAAvC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAA8BH,IAAMC,SAA+B,IAAtBH,EAAM2F,IAAI8C,SAAvD,mBAAOA,EAAP,KAAgBC,EAAhB,KACA,EAAsBxI,IAAMC,SAAS,CACnCe,GAAIlB,EAAM2F,IAAIzE,GACd0E,KAAM5F,EAAM2F,IAAIC,KAChB+C,QAAS3I,EAAM2F,IAAIgD,QACnBC,QAAS5I,EAAM2F,IAAIiD,QACnB/C,SAAU7F,EAAM2F,IAAIE,SACpBgD,aAAc7I,EAAM2F,IAAIkD,aACxBJ,QAASzI,EAAM2F,IAAI8C,UAPrB,mBAAO9C,EAAP,KASA,GATA,KASkCzF,IAAMC,UAAS,IAAjD,mBAAO2I,EAAP,KAAkBC,EAAlB,KACA,EAAkC7I,IAAMC,SAAS,IAAjD,mBAAO6I,EAAP,KAAkBC,EAAlB,KAGAxI,8BAAoBT,EAAMU,OAAO,WAC/B,MAAO,CACLC,gBAAiBA,MAIrB,IAAMA,EAAkB,WACtBN,GAAQ,IAGJO,EAAc,WAClBP,GAAQ,IAGJ6I,EAAO,SAACnG,GACZoB,GAAewB,GACd3B,MAAK,SAAAC,GACJ,GAAiB,IAAbA,EAAI2B,KAKN,OAJAvF,GAAQ,QACJL,EAAMmJ,UACRnJ,EAAMmJ,YAIVF,EAAahF,EAAImF,KACjBL,GAAa,GACbrH,OAAOuF,YAAW,WAChB8B,GAAa,KACb,SAsBAM,EAAa,SAACpB,GAClBvF,QAAQU,IAAI6E,EAAMC,OAAOoB,OACzB3D,EAAIsC,EAAMC,OAAOhH,IAAM+G,EAAMC,OAAOoB,OAWtC,OACE,8BACE,eAACxI,EAAA,EAAD,CAAQyG,YAAU,EAACnH,KAAMA,EAAMW,QAASH,EAAa4G,oBAAqB5C,GAA1E,UACE,cAAC6C,EAAA,EAAD,CAAQ5G,UAAWZ,EAAQmE,OAA3B,SACE,eAACsD,EAAA,EAAD,WACE,cAACpG,EAAA,EAAD,CAAQqG,QAAQ,YAAYpG,QAAS2H,EAArC,kBAGA,4CACgB,SAAflJ,EAAMyF,KACL,cAACnE,EAAA,EAAD,CAAQqG,QAAQ,YAAYpG,QAzCnB,SAACwB,GACpBoB,GAAiBwB,GAChB3B,MAAK,SAAAC,GACJ,GAAiB,IAAbA,EAAI2B,KAKN,OAJAvF,GAAQ,QACJL,EAAMmJ,UACRnJ,EAAMmJ,YAIVF,EAAahF,EAAImF,KACjBL,GAAa,GACbrH,OAAOuF,YAAW,WAChB8B,GAAa,KACb,SA2BM,oBAEU,GAEZ,cAACnB,EAAA,EAAD,CAAYD,QAAQ,KAAK9G,UAAWZ,EAAQM,QAG5C,cAACe,EAAA,EAAD,CAAQ8G,WAAS,EAAC5G,MAAM,UAAUD,QAASX,EAA3C,SACE,cAAC,IAAD,WAIJkI,EACA,eAACS,GAAA,EAAD,CAAOC,SAAS,QAAhB,UACE,cAACC,GAAA,EAAD,oBACCT,EAFH,IAEc,sDACL,GAGX,qBAAKnI,UAAWZ,EAAQuI,QAAxB,SACE,uBAAM3H,UAAWZ,EAAQsI,UAAWmB,YAAU,EAACC,aAAa,MAAMC,SAAUV,EAA5E,UACkB,SAAflJ,EAAMyF,KAAgB,8BACvB,cAACoE,GAAA,EAAD,CACE3I,GAAG,KACH4I,MAAM,KACNC,WAAY,CACVC,UAAU,GAEZC,aAActE,EAAIzE,OAEb,GAEP,8BACE,cAAC2I,GAAA,EAAD,CACE3I,GAAG,OACH4I,MAAM,OACNG,aAActE,EAAIC,KAClBoC,SAAUqB,MAGd,8BACE,cAACQ,GAAA,EAAD,CACE3I,GAAG,UACH4I,MAAM,UACNG,aAActE,EAAIgD,QAClBX,SAAUqB,MAGd,8BACA,cAACQ,GAAA,EAAD,CACE3I,GAAG,UACH4I,MAAM,UACNG,aAActE,EAAIiD,QAClBZ,SAAUqB,MAWI,SAAfrJ,EAAMyF,KAAgB,GACvB,8BACE,cAACoC,EAAA,EAAD,CACEC,QAASW,EACTvH,GAAG,UACH8G,SAvFO,SAACC,GACpBvF,QAAQU,IAAI6E,EAAMC,OAAOJ,SACzBnC,EAAIsC,EAAMC,OAAOhH,IAAM+G,EAAMC,OAAOJ,QAAQ,EAAE,EACzB,YAAlBG,EAAMC,OAAOhH,IACdwH,EAAWT,EAAMC,OAAOJ,UAoFdtG,MAAM,UACNuG,KAAK,UACLI,WAAY,CAAE,aAAc,kCC1L5C,IAAMzI,GAAYC,aAAW,iBAAO,CAClCE,KAAM,CACJwE,SAAU,YAEZ6F,SAAU,CACR7F,SAAU,WACV8F,IAAK,GACLC,MAAO,EACPC,KAAM,EACNC,OAAQ,IACRC,OAAQ,YACRC,QAAS,EACTlG,gBAAiB,eAIN,SAASmG,GAAWzK,GACjC,IAAMC,EAAUP,KAChB,EAAwBQ,IAAMC,UAAS,GAAvC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAAkCH,IAAMC,SAAS,CAACI,MAAM,UAAUC,QAAQ,mBAA1E,mBAAOkK,EAAP,KACA,GADA,KACqBxK,IAAMC,SAASH,EAAM2F,MAA1C,mBAAOA,EAAP,KAwBIgF,GAxBJ,KAwBczK,IAAM0K,aAMpB,IAAIC,EAAU3K,IAAM0K,YAMpB,IAAIE,EAAU5K,IAAM0K,YAQpB,OACE,cAACG,EAAA,EAAD,CAAmBC,YAvCG,WACtB3K,GAAQ,IAsCR,SACE,sBAAKQ,UAAWZ,EAAQJ,KAAxB,UACE,wBAAQ4F,KAAK,SAASlE,QA7CR,WAClBlB,GAAQ,SAAC4K,GAAD,OAAWA,MA4Cf,SACE,cAAC,IAAD,MAED7K,EACC,qBAAKS,UAAWZ,EAAQiK,SAAxB,SACE,eAACgB,EAAA,EAAD,CAAMC,UAAU,MAAMC,aAAW,4BAAjC,UACE,cAACC,EAAA,EAAD,CAAUC,QAAM,EAAhB,SACE,cAACC,EAAA,EAAD,CAAcC,QAAQ,OAAOjK,QAvB3C,WACElB,GAAQ,GACRwK,EAAQY,QAAQ9K,uBAuBN,cAAC0K,EAAA,EAAD,CAAUC,QAAM,EAAC/J,QA9Cf,WACZoE,EAAI8C,QAA0B,IAAhB9C,EAAI8C,QAAc,EAAE,EAClCtE,GAAkBwB,GACjB3B,MAAK,SAAAC,GACJ,GAAiB,IAAbA,EAAI2B,KAKN,OAJAvF,GAAQ,QACJL,EAAMmJ,UACRnJ,EAAMmJ,gBAuCF,SAE0B,IAAtBnJ,EAAM2F,IAAI8C,QACV,cAAC8C,EAAA,EAAD,CAAcC,QAAQ,aAAc,cAACD,EAAA,EAAD,CAAcC,QAAQ,cAG9D,cAACH,EAAA,EAAD,CAAUC,QAAM,EAAC/J,QArC7B,WACElB,GAAQ,GACRsK,EAAQc,QAAQ9K,mBAmCN,SACE,cAAC4K,EAAA,EAAD,CAAcC,QAAQ,WAExB,cAACH,EAAA,EAAD,CAAUC,QAAM,EAAC/J,QA5B7B,WACElB,GAAQ,GACR,IAAIqL,EAAOhK,OAAOC,SAASC,OAAOF,OAAOC,SAASgK,SAAS,gCAAgC3L,EAAM2F,IAAIC,KAAK,aAAa5F,EAAM2F,IAAIE,SACjI+F,IAAKF,GACLZ,EAAQW,QAAQ9K,mBAwBN,SACE,cAAC4K,EAAA,EAAD,CAAcC,QAAQ,iBAI1B,KACJ,cAACvG,GAAD,CAAMU,IAAK3F,EAAM2F,IAAKjF,MAAOiK,IAC7B,cAAC,GAAD,CAAYhF,IAAK3F,EAAM2F,IAAKF,KAAK,OAAQ0D,SAAUnJ,EAAMmJ,SAAUzI,MAAOmK,IAC1E,cAAC9K,EAAD,CAAWO,OAAQoK,EAAWhK,MAAOoK,SCtF7C,IAAMe,GAAU,CACd,CAAE3K,GAAI,KAAM4I,MAAO,KAAMgC,SAAU,KACnC,CAAE5K,GAAI,OAAQ4I,MAAO,OAAQgC,SAAU,KACvC,CACE5K,GAAI,UACJ4I,MAAO,WAET,CACE5I,GAAI,UACJ4I,MAAO,WAET,CACE5I,GAAI,WACJ4I,MAAO,YAET,CACE5I,GAAI,eACJ4I,MAAO,eACPiC,OAAQ,SAACzC,GAAD,OAAWA,GAAmB,IAAVA,EAAY,cAAC,IAAD,IAAY,cAAC,IAAD,MAEtD,CACEpI,GAAI,UACJ4I,MAAO,UACPiC,OAAQ,SAACzC,GACP,OAAO,cAACzB,EAAA,EAAD,CACCC,QAAmB,IAAVwB,EACTpI,GAAG,UACHM,MAAM,UACNuG,KAAK,UACLI,WAAY,CAAE,aAAc,wBAIxC,CACEjH,GAAI,SACJ4I,MAAO,SACPiC,OAAQ,SAACzC,EAAM3D,EAAIwD,GAAc,OAAO,cAACsB,GAAD,CAAY9E,IAAKA,EAAKwD,SAAUA,OAItEzJ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJC,MAAO,OACPuE,SAAU,YAEZ2H,UAAW,CACTC,UAAW,KAEb/B,SAAU,CACR7F,SAAU,WACV8F,IAAK,GACLC,MAAO,EACPC,KAAM,EACNC,OAAQ,EACRC,OAAQ,YACRC,QAAS,EACTlG,gBAAiB,WAEnBF,OAAQ,CACNC,SAAU,YAEZ9D,MAAO,CACLgE,WAAY3E,EAAM4E,QAAQ,GAC1BC,KAAM,OAIK,SAASyH,KACtB,IAGIC,EAAKC,EAHHnM,EAAUP,KAChB,EAAwBQ,IAAMC,SAAS,GAAvC,mBAAOkM,EAAP,KAAaC,EAAb,KACA,EAAsCpM,IAAMC,SAAS,IAArD,mBAAOoM,EAAP,KAAoBC,EAApB,KAHmC,EAKjBtM,IAAMC,SAAS,IALE,mBAKlCgM,EALkC,KAK5BC,EAL4B,KAMnC,IAmBMK,EAAc,WAClBtI,KACCH,MAAK,SAAAC,GAAQ,IAAD,EACXkI,EAAKO,OAAO,IACZ,EAAAP,GAAKQ,KAAL,oBAAa1I,EAAIlB,KAAKsJ,OACtBD,EAAQ,IACRA,EAAQD,OAIRtB,EAAU3K,IAAM0K,YAOpB,OAFA1K,IAAM0M,UAAUH,EAAY,IAI1B,eAACI,EAAA,EAAD,CAAOhM,UAAWZ,EAAQJ,KAA1B,UACE,cAAC4H,EAAA,EAAD,CAAQ5G,UAAWZ,EAAQmE,OAA3B,SACE,eAACsD,EAAA,EAAD,WACE,cAACpG,EAAA,EAAD,CAAQqG,QAAQ,YAAYpG,QAXpC,WACEsJ,EAAQY,QAAQ9K,mBAUV,iBAGA,cAACiH,EAAA,EAAD,CAAYD,QAAQ,KAAK9G,UAAWZ,EAAQM,aAKhD,cAAC,GAAD,CAAYoF,IAjDF,CACZzE,GAAI,GACJ0E,KAAM,GACN+C,QAAS,GACTC,QAAS,GACT/C,SAAU,GACVgD,aAAc,EACdJ,QAAS,GA0CmBhD,KAAK,MAAM0D,SAAUsD,EAAa/L,MAAOmK,IACnE,cAACiC,EAAA,EAAD,CAAgBjM,UAAWZ,EAAQ+L,UAAnC,SACE,eAACe,EAAA,EAAD,CAAOC,cAAY,EAAC5B,aAAW,eAA/B,UACE,cAAC6B,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,UACGrB,GAAQsB,KAAI,SAACC,GAAD,OACX,cAACC,EAAA,EAAD,CAEEC,MAAOF,EAAOE,MACdC,MAAO,CAAEzB,SAAUsB,EAAOtB,UAH5B,SAKGsB,EAAOtD,OAJHsD,EAAOlM,WASpB,cAACsM,EAAA,EAAD,UACGrB,EAAKsB,MAAMpB,EAAOE,EAAaF,EAAOE,EAAcA,GAAaY,KAAI,SAACxH,GACrE,OACE,cAACuH,EAAA,EAAD,CAAUQ,OAAK,EAACC,KAAK,WAAWC,UAAW,EAA3C,SACG/B,GAAQsB,KAAI,SAACC,GACZ,IAAM9D,EAAQ3D,EAAIyH,EAAOlM,IACzB,OACE,cAACmM,EAAA,EAAD,CAA2BC,MAAOF,EAAOE,MAAzC,SACGF,EAAOrB,OAASqB,EAAOrB,OAAOzC,EAAM3D,EAAI8G,GAAenD,GAD1C8D,EAAOlM,QAJsByE,EAAIC,gBAejE,cAACiI,EAAA,EAAD,CACEC,mBAAoB,CAAC,GAAI,GAAI,KAC7B3C,UAAU,MACV4C,MAAO5B,EAAK6B,OACZzB,YAAaA,EACbF,KAAMA,EACN4B,aA/EmB,SAAChG,EAAOiG,GAC/B5B,EAAQ4B,IA+EJC,oBA5E0B,SAAClG,GAC/BuE,GAAgBvE,EAAMC,OAAOoB,OAC7BgD,EAAQ,S,sCC3GS3J,G,gKACjB,WACI,OACI,yC,GAHuBzC,IAAMkO,WCSnC1O,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCwE,OAAQ,CACNC,SAAU,WACVC,gBAAiB,WAEnB/D,MAAO,CACLgE,WAAY3E,EAAM4E,QAAQ,GAC1BC,KAAM,GAERC,eAAgB,CACd5E,MAAO,MACP6E,OAAQ,cAIG,SAASM,GAAKjF,GAC3B,IAAMC,EAAUP,KAChB,EAA0BQ,IAAMC,UAAS,GAAzC,mBAAO+E,EAAP,KAAcC,EAAd,KACIC,EAAS,KACTC,EAAmB,EAMjBgJ,EAAiB,SAACtG,GACtB,IAAIuG,EAAM,IAAIC,OAAO,YAAcxG,EAAO,gBAAiB,KACvDyG,EAAI9M,OAAOC,SAASuB,KAAKuL,OAAO,GAAGC,MAAMJ,GAC7C,OAAS,MAALE,EACOG,mBAAmBH,EAAE,IAEzB,MAGHlJ,EAAW,SAACC,GAChB,IAAIqJ,EAASP,EAAe,UACxBzI,EAAOyI,EAAe,QACtBxI,EAAWwI,EAAe,YAC9B,GAAIO,GAAWhJ,GAASC,EAAxB,CAGA,IAAIL,EAAkB,CACpBC,KAAM,OAEJC,EAAWvB,GAAW,SAASyK,EAAO,IAAIhJ,EAAK,IAAIC,EAAS,OAEhEL,EAAe,IAAUE,EACzBF,EAAe,SAAeN,EAC9BM,EAAe,QAAa,EAC5B9C,QAAQU,IAAI,kBAAmBoC,GAC/BM,EAAaN,KAGTM,EAAe,SAACN,GAClB,IAAIO,EAAUC,SAASC,uBAAuB,iBAAiB,GAEzC,qBAAXb,GACO,MAAVA,IACFA,EAAOc,QACPd,EAAOe,SACPf,EAAOgB,qBACPhB,EAAOiB,UACPjB,EAAQ,OAIdA,EAASkB,IAAIC,aAAaf,EAAiB,CACvCgB,cAAc,EACdC,oBAAqB,IACrBC,SAAU,WAEPC,GAAGL,IAAIM,OAAOC,OAAO,SAACC,EAAWC,EAAaC,GACnDtE,QAAQU,IAAI,aAAc0D,GAC1BpE,QAAQU,IAAI,eAAgB2D,GAC5BrE,QAAQU,IAAI,aAAc4D,GAEtB5B,IACFA,EAAOc,QACPd,EAAOe,SACPf,EAAOgB,qBACPhB,EAAOiB,UACPjB,EAAQ,KACR1D,OAAOuF,WAAW3B,EAAS,SAI/BF,EAAOuB,GAAGL,IAAIM,OAAOM,iBAAiB,SAAUjD,GACtB,GAApBoB,EAIAA,GAAoBpB,EAAIkD,cAC1B9B,EAAmBpB,EAAIkD,eAErBzE,QAAQU,IAAI,iBAAkBa,EAAIkD,eAClC9B,EAAmB,EACfD,IACFA,EAAOc,QACPd,EAAOe,SACPf,EAAOgB,qBACPhB,EAAOiB,UACPjB,EAAQ,KACR1D,OAAOuF,WAAW3B,EAAS,OAd/BD,EAAmBpB,EAAIkD,iBAkB3B/B,EAAOgC,mBAAmBrB,GAC1BX,EAAOiC,OACPjC,EAAOkC,QAGX,OACE,8BACE,gCACE,cAACG,EAAA,EAAD,CAAQ5G,UAAWZ,EAAQmE,OAA3B,SACE,eAACsD,EAAA,EAAD,WACE,cAACpG,EAAA,EAAD,CAAQqG,QAAQ,YAAYpG,QAAS+D,EAArC,kBAGA,eAACsC,EAAA,EAAD,CAAYD,QAAQ,KAAK9G,UAAWZ,EAAQM,MAA5C,qBAEE,cAACsH,EAAA,EAAD,CACEC,QAAS5C,EACThE,GAAG,QACHM,MAAM,UACNuG,KAAK,WACLC,SAzGO,SAACC,GACpB9C,EAAS8C,EAAMC,OAAOJ,UAyGVK,WAAY,CAAE,aAAc,8BAQpC,qBAAKtH,UAAWZ,EAAQyE,eAAxB,SACI,8BACI,uBAAOqD,KAAK,eAAelH,UAAU,gBAAgBwH,UAAQ,EAACC,MAAM,WAAWxI,MAAM,OAArF,iFC9IhB,SAAS+O,GAAQ7O,GACb,OACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAO8O,OAAK,EAACC,KAAK,IAAI5D,UAAWe,KACjC,cAAC,IAAD,CAAO4C,OAAK,EAACC,KAAK,QAAQ5D,UAAW6D,KACrC,cAAC,IAAD,CAAO7D,UAAW8D,QAKTC,sBAAKL,ICHPM,OAVf,WACE,OACE,8BACI,cAAC,IAAD,UACI,cAAC,GAAD,SCHZ,SAASC,KACP,OACE,cAACC,GAAD,IAIJC,IAASC,OAAO,cAACH,GAAD,IAASpJ,SAASwJ,cAAc,W","file":"static/js/main.8767d5c1.chunk.js","sourcesContent":["import React, { useImperativeHandle }  from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n}));\r\n\r\nexport default function CopyAlert(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [title, setTitle] = React.useState(props.dialog.title);\r\n  const [content, setContent] = React.useState(props.dialog.content);\r\n\r\n  //用useImperativeHandle暴露一些外部ref能访问的属性\r\n  useImperativeHandle(props.onRef, () => {\r\n    return {\r\n      handleClickOpen: handleClickOpen,\r\n    };\r\n  });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            {content}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            OK\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","let env = process.env.NODE_ENV\r\nlet serverURL\r\n \r\nif (env === 'development') {\r\n    serverURL = \"http://127.0.0.1:8080\"\r\n} else if (env === 'production') {\r\n    serverURL = window.location.origin\r\n}\r\n\r\nexport default {serverURL:serverURL}","import Env from '../conf/env';\r\nimport axios from 'axios'\r\n\r\n\r\naxios.defaults.withCredentials = false;\r\n\r\naxios.defaults.timeout = 10000;\r\n\r\naxios.interceptors.request.use(config => {\r\n  let token = window.localStorage.getItem(\"token\")\r\n  config.headers.token = token\r\n  return config;\r\n}, err => {\r\n  console.error(err);\r\n  return Promise.reject(err);\r\n});\r\n\r\naxios.interceptors.response.use(function (response) {\r\n  if (response.data && response.data.errcode) {\r\n    if (parseInt(response.data.errcode) === 401) {\r\n      //nologin\r\n      window.location.hash = \"#/login\"\r\n    }\r\n  }\r\n  return response;\r\n}, function (error) {\r\n  if (axios.isCancel()) {\r\n    return Promise.reject(error);\r\n  } else {\r\n    if (error.response) {\r\n      console.log(error.response.status === 401)\r\n      if (error.response.status === 401) {\r\n        if (!window.localStorage.getItem(\"token\") || !window.localStorage.getItem(\"tokenExpired\") || window.localStorage.getItem(\"tokenExpired\") === \"false\") { \r\n          window.localStorage.setItem(\"tokenExpired\", \"true\");\r\n          window.location.hash = \"#/login\"\r\n        }\r\n      } else if (error.response.status === 500) {\r\n        alert(\"server exception !\")\r\n      }\r\n    } else if (error && String(error).toLowerCase().substring(0, 14) === \"error: timeout\") {\r\n      alert(\"server timeout !\")\r\n    }else{\r\n      alert(\"server error !\")\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n});\r\n\r\nlet serverURL = Env.serverURL;\r\n\r\nexport const POST = (url, params) => {\r\n  return axios.post(`${serverURL}${url}`, params).then(res => res.data)\r\n}\r\nexport const GET = (url, params) => {\r\n  return axios.get(`${serverURL}${url}`, {\r\n    params: params\r\n  }).then(res => res.data)\r\n}\r\n\r\nexport const PUT = (url, params) => {\r\n  return axios.put(`${serverURL}${url}`, params).then(res => res.data)\r\n}\r\n\r\nexport const DELETE = (url, params) => {\r\n  return axios.delete(`${serverURL}${url}`, {\r\n    params: params\r\n  }).then(res => res.data)\r\n}\r\n\r\nexport const PATCH = (url, params) => {\r\n  return axios.patch(`${serverURL}${url}`, params).then(res => res.data)\r\n}\r\n"," import Env from '../conf/env';\r\n import * as API from './AxiosConf'\r\n \r\n let serverURL = Env.serverURL;\r\n export default {\r\n    flvURL: `${serverURL}`,\r\n    login: (params) => {\r\n        return API.POST(`/system/login`,params)\r\n    },\r\n    cameraList: (params) => {\r\n        return API.GET(`/camera/list`,params)\r\n    },\r\n    cameraEdit: (params) => {\r\n        return API.POST(`/camera/edit`,params)\r\n    },\r\n    cameraDelete: (params) => {\r\n        return API.POST(`/camera/delete`,params)\r\n    },\r\n    cameraEnabled: (params) => {\r\n        return API.POST(`/camera/enabled`,params)\r\n    },\r\n }\r\n ","import React, { useImperativeHandle } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Flv from 'flv.js';\r\nimport API from '../api/Api';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: 'relative',\r\n    backgroundColor: '#eebbaa',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  videoContainer: {\r\n    width: '90%',\r\n    margin: '0 auto'\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Play(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [audio, setAudio] = React.useState(true);\r\n  var player = null;\r\n  var lastDecodedFrame = 0\r\n\r\n  const switchChange = (event) => {\r\n    setAudio(event.target.checked)\r\n  }\r\n\r\n  //用useImperativeHandle暴露一些外部ref能访问的属性\r\n  useImperativeHandle(props.onRef, () => {\r\n    return {\r\n      handleClickOpen: handleClickOpen,\r\n    };\r\n  });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const flv_load = (val) => {\r\n      var mediaDataSource = {\r\n          type: 'flv'\r\n      };\r\n      let videoUrl = API.flvURL+\"/live/permanent/\"+props.row.code+\"/\"+props.row.authCode+\".flv\";\r\n      mediaDataSource['url'] = videoUrl;\r\n      mediaDataSource['hasAudio'] = audio;\r\n      mediaDataSource['isLive'] = true;\r\n      console.log('MediaDataSource', mediaDataSource);\r\n      flv_load_mds(mediaDataSource);\r\n  }\r\n\r\n  const flv_load_mds = (mediaDataSource) => {\r\n      var element = document.getElementsByClassName('centeredVideo')[0];\r\n    \r\n      if (typeof player !== \"undefined\") {\r\n          if (player != null) {\r\n            player.pause();\r\n            player.unload();\r\n            player.detachMediaElement();\r\n            player.destroy();\r\n            player= null;\r\n          }\r\n      }\r\n      \r\n      player = Flv.createPlayer(mediaDataSource, {\r\n          enableWorker: false,\r\n          lazyLoadMaxDuration: 3 * 60,\r\n          seekType: 'range',\r\n      });\r\n      player.on(Flv.Events.ERROR, (errorType, errorDetail, errorInfo) => {\r\n        console.log(\"errorType:\", errorType);\r\n        console.log(\"errorDetail:\", errorDetail);\r\n        console.log(\"errorInfo:\", errorInfo);\r\n        //视频出错后销毁重新创建\r\n        if (player) {\r\n          player.pause();\r\n          player.unload();\r\n          player.detachMediaElement();\r\n          player.destroy();\r\n          player= null;\r\n          window.setTimeout(flv_load,500)\r\n        }\r\n      });\r\n      //画面卡死\r\n      player.on(Flv.Events.STATISTICS_INFO, function (res) {\r\n        if (lastDecodedFrame == 0) {\r\n          lastDecodedFrame = res.decodedFrames;\r\n          return;\r\n        }\r\n        if (lastDecodedFrame != res.decodedFrames) {\r\n          lastDecodedFrame = res.decodedFrames;\r\n        } else {\r\n            console.log(\"decodedFrames:\", res.decodedFrames)\r\n            lastDecodedFrame = 0;\r\n            if (player) {\r\n              player.pause();\r\n              player.unload();\r\n              player.detachMediaElement();\r\n              player.destroy();\r\n              player= null;\r\n              window.setTimeout(flv_load,500)\r\n          }\r\n        }\r\n      });\r\n      player.attachMediaElement(element);\r\n      player.load();\r\n      player.play()\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Button variant=\"contained\" onClick={flv_load}>\r\n              play\r\n            </Button>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n            hasAudio\r\n              <Switch\r\n                checked={audio}\r\n                id=\"Audio\"\r\n                color=\"primary\"\r\n                name=\"hasAudio\"\r\n                onChange={switchChange}\r\n                inputProps={{ 'aria-label': 'primary checkbox' }}\r\n              />\r\n            </Typography>\r\n            <Button autoFocus color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon />\r\n            </Button>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <div className={classes.videoContainer}>\r\n            <div>\r\n                <video name=\"videoElement\" className=\"centeredVideo\" controls allow=\"autoPlay\" width=\"100%\" >\r\n                    Your browser is too old which doesn't support HTML5 video.\r\n                </video>\r\n            </div>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useImperativeHandle } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport { Alert, AlertTitle } from '@material-ui/lab';\r\nimport API from '../api/Api';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  formClass: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n      width: '25ch',\r\n    },\r\n  },\r\n  formDiv: {\r\n    margin: '0 auto',\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Play(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [enabled, setEnabled] = React.useState(props.row.enabled === 1?true:false);\r\n  const [row, setRow] = React.useState({\r\n    id: props.row.id,\r\n    code: props.row.code,\r\n    rtspURL: props.row.rtspURL,\r\n    rtmpURL: props.row.rtmpURL,\r\n    authCode: props.row.authCode,\r\n    onlineStatus: props.row.onlineStatus,\r\n    enabled: props.row.enabled,\r\n  });\r\n  const [alertShow, setAlertShow] = React.useState(false);\r\n  const [alertText, setAlertText] = React.useState(\"\");\r\n\r\n  //用useImperativeHandle暴露一些外部ref能访问的属性\r\n  useImperativeHandle(props.onRef, () => {\r\n    return {\r\n      handleClickOpen: handleClickOpen,\r\n    };\r\n  });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const save = (data) => {\r\n    API.cameraEdit(row)\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n      setAlertText(res.msg);\r\n      setAlertShow(true);\r\n      window.setTimeout(function (){\r\n        setAlertShow(false);\r\n      },5000)\r\n    });\r\n  };\r\n\r\n  const deleteCamera = (data) => {\r\n    API.cameraDelete(row)\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n      setAlertText(res.msg);\r\n      setAlertShow(true);\r\n      window.setTimeout(function (){\r\n        setAlertShow(false);\r\n      },5000)\r\n    });\r\n  };\r\n\r\n  const formChange = (event) => {\r\n    console.log(event.target.value)\r\n    row[event.target.id] = event.target.value\r\n  }\r\n\r\n  const switchChange = (event) => {\r\n    console.log(event.target.checked)\r\n    row[event.target.id] = event.target.checked?1:0\r\n    if(event.target.id===\"enabled\"){\r\n      setEnabled(event.target.checked)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Button variant=\"contained\" onClick={save}>\r\n              save\r\n            </Button>\r\n            <span>&nbsp;&nbsp;</span>\r\n            {props.type === 'edit'?\r\n              <Button variant=\"contained\" onClick={deleteCamera}>\r\n                delete\r\n              </Button>:\"\"\r\n            }       \r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              \r\n            </Typography>\r\n            <Button autoFocus color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon />\r\n            </Button>\r\n          </Toolbar>\r\n        </AppBar>{\r\n          alertShow?\r\n          <Alert severity=\"error\">\r\n            <AlertTitle>Error</AlertTitle>\r\n            {alertText} <strong>check it out!</strong>\r\n          </Alert>:\"\"\r\n        }\r\n        \r\n        <div className={classes.formDiv}>\r\n          <form className={classes.formClass} noValidate autoComplete=\"off\" onSubmit={save}>\r\n            {props.type === 'edit'?<div>\r\n            <TextField \r\n              id=\"id\"\r\n              label=\"id\" \r\n              InputProps={{\r\n                readOnly: true,\r\n              }} \r\n              defaultValue={row.id}\r\n            />\r\n            </div>:\"\"}\r\n            \r\n            <div>\r\n              <TextField \r\n                id=\"code\" \r\n                label=\"code\" \r\n                defaultValue={row.code}\r\n                onChange={formChange}\r\n              />\r\n            </div>\r\n            <div>\r\n              <TextField \r\n                id=\"rtspURL\" \r\n                label=\"rtspURL\" \r\n                defaultValue={row.rtspURL}\r\n                onChange={formChange}\r\n              />\r\n            </div>\r\n            <div>\r\n            <TextField \r\n              id=\"rtmpURL\"\r\n              label=\"rtmpURL\" \r\n              defaultValue={row.rtmpURL}\r\n              onChange={formChange}\r\n            />\r\n            </div>\r\n            {/* <div>\r\n              <TextField \r\n                id=\"authCode\" \r\n                label=\"authCode\" \r\n                defaultValue={row.authCode}\r\n                onChange={formChange}\r\n              />\r\n            </div> */}\r\n            {props.type === 'edit'?\"\":\r\n            <div>\r\n              <Switch\r\n                checked={enabled}\r\n                id=\"enabled\"\r\n                onChange={switchChange}\r\n                color=\"primary\"\r\n                name=\"enabled\"\r\n                inputProps={{ 'aria-label': 'primary checkbox' }}\r\n              />\r\n            </div>\r\n            }\r\n          </form>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListIcon from '@material-ui/icons/List';\r\nimport Copy from 'copy-to-clipboard';\r\nimport CopyAlert from './CopyAlert'\r\nimport Play from './Play';\r\nimport CameraEdit from './CameraEdit';\r\nimport API from '../api/Api';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    position: 'relative',\r\n  },\r\n  dropdown: {\r\n    position: 'absolute',\r\n    top: 28,\r\n    right: 0,\r\n    left: 0, \r\n    zIndex: 999,\r\n    border: '0px solid',\r\n    padding: 1,\r\n    backgroundColor: '#f8f8f8',\r\n  },\r\n}));\r\n\r\nexport default function ActionList(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [dialogObj, setDialogObj] = React.useState({title:\"Success\",content:\"copy success !\"});\r\n  const [row,setRow] = React.useState(props.row);\r\n\r\n  const handleClick = () => {\r\n    setOpen((prev) => !prev);\r\n  };\r\n\r\n  const handleClickAway = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const enabled=() => {\r\n    row.enabled = row.enabled === 1?0:1\r\n    API.cameraEnabled(row)\r\n    .then(res => {\r\n      if (res.code === 1) {\r\n        setOpen(false);\r\n        if (props.callBack){\r\n          props.callBack()\r\n        }\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  let playRef = React.createRef();\r\n  function play() {\r\n    setOpen(false);\r\n    playRef.current.handleClickOpen();\r\n  }\r\n\r\n  let editRef = React.createRef();\r\n  function edit() {\r\n    setOpen(false);\r\n    editRef.current.handleClickOpen();\r\n  }\r\n\r\n  let copyRef = React.createRef();\r\n  function share() {\r\n    setOpen(false);\r\n    let sURL = window.location.origin+window.location.pathname+\"#/live?method=permanent&code=\"+props.row.code+\"&authCode=\"+props.row.authCode\r\n    Copy(sURL);\r\n    copyRef.current.handleClickOpen();\r\n  }\r\n\r\n  return (\r\n    <ClickAwayListener onClickAway={handleClickAway}>\r\n      <div className={classes.root}>\r\n        <button type=\"button\" onClick={handleClick}>\r\n          <ListIcon />\r\n        </button>\r\n        {open ? (\r\n          <div className={classes.dropdown}>\r\n            <List component=\"nav\" aria-label=\"secondary mailbox folders\">\r\n              <ListItem button>\r\n                <ListItemText primary=\"edit\" onClick={edit}/>\r\n              </ListItem>\r\n              <ListItem button onClick={enabled}>\r\n                {\r\n                  props.row.enabled === 1?\r\n                  <ListItemText primary=\"turn-off\" />:<ListItemText primary=\"turn-on\" />\r\n                }\r\n              </ListItem>\r\n              <ListItem button onClick={play}>\r\n                <ListItemText primary=\"play\" />\r\n              </ListItem>\r\n              <ListItem button onClick={share}>\r\n                <ListItemText primary=\"share\" />\r\n              </ListItem>\r\n            </List>\r\n          </div>\r\n        ) : null}\r\n        <Play row={props.row} onRef={playRef}/>\r\n        <CameraEdit row={props.row} type=\"edit\"  callBack={props.callBack} onRef={editRef}/>\r\n        <CopyAlert dialog={dialogObj} onRef={copyRef}/>\r\n      </div>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport LinkOffIcon from '@material-ui/icons/LinkOff';\r\nimport LinkIcon from '@material-ui/icons/Link';\r\nimport ActionList from './ActionList';\r\nimport CameraEdit from './CameraEdit';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport API from '../api/Api';\r\nconst columns = [\r\n  { id: 'id', label: 'id', minWidth: 170 },\r\n  { id: 'code', label: 'code', minWidth: 100 },\r\n  {\r\n    id: 'rtspURL',\r\n    label: 'rtspURL',\r\n  },\r\n  {\r\n    id: 'rtmpURL',\r\n    label: 'rtmpURL',\r\n  },\r\n  {\r\n    id: 'authCode',\r\n    label: 'authCode',\r\n  },\r\n  {\r\n    id: 'onlineStatus',\r\n    label: 'onlineStatus',\r\n    format: (value) => value && value === 1?<LinkIcon/>:<LinkOffIcon/>,\r\n  },\r\n  {\r\n    id: 'enabled',\r\n    label: 'enabled',\r\n    format: (value) => {\r\n      return <Switch\r\n              checked={value === 1}\r\n              id=\"enabled\"\r\n              color=\"primary\"\r\n              name=\"enabled\"\r\n              inputProps={{ 'aria-label': 'primary checkbox' }}\r\n            />\r\n    }\r\n  },\r\n  {\r\n    id: 'action',\r\n    label: 'action',\r\n    format: (value,row,callBack) => {return <ActionList row={row} callBack={callBack} />},\r\n  },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    position: 'relative',\r\n  },\r\n  container: {\r\n    minHeight: 400,\r\n  },\r\n  dropdown: {\r\n    position: 'absolute',\r\n    top: 28,\r\n    right: 0,\r\n    left: 0,\r\n    zIndex: 0,\r\n    border: '0px solid',\r\n    padding: 1,\r\n    backgroundColor: '#f8f8f8',\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nexport default function CameraList() {\r\n  const classes = useStyles();\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\r\n  var rows,setRows;\r\n  [rows, setRows] = React.useState([]);\r\n  var editRow = {\r\n    id: \"\",\r\n    code: \"\",\r\n    rtspURL: \"\",\r\n    rtmpURL: \"\",\r\n    authCode: \"\",\r\n    onlineStatus: 0,\r\n    enabled: 1,\r\n  }\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(+event.target.value);\r\n    setPage(0);\r\n  };\r\n\r\n  const getPageList = ()=>{\r\n    API.cameraList()\r\n    .then(res => {\r\n      rows.splice(0);\r\n      rows.push(...res.data.page)\r\n      setRows([])\r\n      setRows(rows)\r\n    });\r\n  }\r\n\r\n  let editRef = React.createRef();\r\n  function edit() {\r\n    editRef.current.handleClickOpen();\r\n  }\r\n\r\n  React.useEffect(getPageList,[]) \r\n\r\n  return (\r\n    \r\n    <Paper className={classes.root}>\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar>\r\n          <Button variant=\"contained\" onClick={edit}>\r\n            ADD\r\n          </Button>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            \r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <CameraEdit row={editRow} type=\"add\" callBack={getPageList} onRef={editRef}/>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  align={column.align}\r\n                  style={{ minWidth: column.minWidth }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n              return (\r\n                <TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\r\n                  {columns.map((column) => {\r\n                    const value = row[column.id];\r\n                    return (\r\n                      <TableCell key={column.id} align={column.align}>\r\n                        {column.format ? column.format(value,row,getPageList) : value}\r\n                      </TableCell>\r\n                    );\r\n                  })}\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[10, 25, 100]}\r\n        component=\"div\"\r\n        count={rows.length}\r\n        rowsPerPage={rowsPerPage}\r\n        page={page}\r\n        onChangePage={handleChangePage}\r\n        onChangeRowsPerPage={handleChangeRowsPerPage}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nexport default class error extends React.Component{\r\n    render(){\r\n        return(\r\n            <h2>404</h2>\r\n        );\r\n    }\r\n}","import React, { useImperativeHandle } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Flv from 'flv.js';\r\nimport API from '../api/Api';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: 'relative',\r\n    backgroundColor: '#eebbaa',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  videoContainer: {\r\n    width: '90%',\r\n    margin: '0 auto'\r\n  },\r\n}));\r\n\r\nexport default function Play(props) {\r\n  const classes = useStyles();\r\n  const [audio, setAudio] = React.useState(true);\r\n  var player = null;\r\n  var lastDecodedFrame = 0\r\n\r\n  const switchChange = (event) => {\r\n    setAudio(event.target.checked)\r\n  }\r\n\r\n  const getQueryString = (name) => {\r\n    let reg = new RegExp(\"(^|&|\\\\?)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n    let r = window.location.hash.substr(1).match(reg);\r\n    if (r != null) {\r\n        return decodeURIComponent(r[2]);\r\n    };\r\n    return null;\r\n  }\r\n\r\n  const flv_load = (val) => {\r\n    let method = getQueryString(\"method\");\r\n    let code = getQueryString(\"code\");\r\n    let authCode = getQueryString(\"authCode\");\r\n    if(!method || !code || !authCode){\r\n      return\r\n    }\r\n    var mediaDataSource = {\r\n      type: 'flv'\r\n    };\r\n    let videoUrl = API.flvURL+\"/live/\"+method+\"/\"+code+\"/\"+authCode+\".flv\";\r\n    // let videoUrl = window.origin.substring(0,window.origin.lastIndexOf(\":\"))+\":9091/live/\"+method+\"/\"+code+\"/\"+authCode+\".flv\";\r\n    mediaDataSource['url'] = videoUrl;\r\n    mediaDataSource['hasAudio'] = audio;\r\n    mediaDataSource['isLive'] = true;\r\n    console.log('MediaDataSource', mediaDataSource);\r\n    flv_load_mds(mediaDataSource);\r\n  }\r\n\r\n  const flv_load_mds = (mediaDataSource) => {\r\n      var element = document.getElementsByClassName('centeredVideo')[0];\r\n    \r\n      if (typeof player !== \"undefined\") {\r\n          if (player != null) {\r\n            player.pause();\r\n            player.unload();\r\n            player.detachMediaElement();\r\n            player.destroy();\r\n            player= null;\r\n          }\r\n      }\r\n      \r\n      player = Flv.createPlayer(mediaDataSource, {\r\n          enableWorker: false,\r\n          lazyLoadMaxDuration: 3 * 60,\r\n          seekType: 'range',\r\n      });\r\n      player.on(Flv.Events.ERROR, (errorType, errorDetail, errorInfo) => {\r\n        console.log(\"errorType:\", errorType);\r\n        console.log(\"errorDetail:\", errorDetail);\r\n        console.log(\"errorInfo:\", errorInfo);\r\n        //视频出错后销毁重新创建\r\n        if (player) {\r\n          player.pause();\r\n          player.unload();\r\n          player.detachMediaElement();\r\n          player.destroy();\r\n          player= null;\r\n          window.setTimeout(flv_load,500)\r\n        }\r\n      });\r\n      //画面卡死\r\n      player.on(Flv.Events.STATISTICS_INFO, function (res) {\r\n        if (lastDecodedFrame == 0) {\r\n          lastDecodedFrame = res.decodedFrames;\r\n          return;\r\n        }\r\n        if (lastDecodedFrame != res.decodedFrames) {\r\n          lastDecodedFrame = res.decodedFrames;\r\n        } else {\r\n            console.log(\"decodedFrames:\", res.decodedFrames)\r\n            lastDecodedFrame = 0;\r\n            if (player) {\r\n              player.pause();\r\n              player.unload();\r\n              player.detachMediaElement();\r\n              player.destroy();\r\n              player= null;\r\n              window.setTimeout(flv_load,500)\r\n          }\r\n        }\r\n      });\r\n      player.attachMediaElement(element);\r\n      player.load();\r\n      player.play()\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Button variant=\"contained\" onClick={flv_load}>\r\n              play\r\n            </Button>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n            hasAudio\r\n              <Switch\r\n                checked={audio}\r\n                id=\"Audio\"\r\n                color=\"primary\"\r\n                name=\"hasAudio\"\r\n                onChange={switchChange}\r\n                inputProps={{ 'aria-label': 'primary checkbox' }}\r\n              />\r\n            </Typography>\r\n            {/* <Button autoFocus color=\"inherit\">\r\n              <CloseIcon />\r\n            </Button> */}\r\n          </Toolbar>\r\n        </AppBar>\r\n        <div className={classes.videoContainer}>\r\n            <div>\r\n                <video name=\"videoElement\" className=\"centeredVideo\" controls allow=\"autoPlay\" width=\"100%\" >\r\n                    Your browser is too old which doesn't support HTML5 video.\r\n                </video>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { memo } from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport CameraList from '../camera/CameraList';\r\nimport NoMatch from '../404/NoMatch';\r\nimport Live from '../camera/Live';\r\n\r\nfunction Routing(props) {\r\n    return (\r\n      <Switch>\r\n        <Route exact path=\"/\" component={CameraList} />\r\n        <Route exact path=\"/live\" component={Live} /> \r\n        <Route component={NoMatch} />\r\n      </Switch>\r\n    );\r\n  }\r\n  \r\n  export default memo(Routing);\r\n","import { HashRouter } from \"react-router-dom\";\r\nimport Routing from './route/Routing';\r\n\r\nfunction Rtmp2flv() {\r\n  return (\r\n    <div>\r\n        <HashRouter>\r\n            <Routing/>\r\n        </HashRouter>\r\n    </div>\r\n  );\r\n} \r\n\r\nexport default Rtmp2flv;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Rtsp2rtmp from './Rtsp2rtmp';\n\nfunction App() {\n  return (\n    <Rtsp2rtmp />\n  );\n}\n\nReactDOM.render(<App />, document.querySelector('#app'));"],"sourceRoot":""}